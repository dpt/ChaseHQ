<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 9F47</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9E11.html">9E11</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40775">Map</a></td>
<td class="next">
Next: <a href="9F99.html">9F99</a>
</td>
</tr>
</table>
<div class="description">9F47: Plots an 8x15 LED font digit</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This appears to be set up to work for Y coordinates of 1, 9, 17, ...
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Glyph ID (0..9)</td>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">Address of (real) screen location</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">ledfont_plot</td>
<td class="address-2"><span id="40775"></span>9F47</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40776"></span>9F48</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="10"><span class="register">HL</span> = &amp;ledfont[glyphID * 15]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40777"></span>9F49</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40779"></span>9F4B</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40780"></span>9F4C</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40781"></span>9F4D</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40782"></span>9F4E</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40783"></span>9F4F</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40784"></span>9F50</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40785"></span>9F51</td>
<td class="instruction">LD HL,$DF62</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40788"></span>9F54</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40789"></span>9F55</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Save the screen address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40790"></span>9F56</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1">Save <span class="register">D</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40791"></span>9F57</td>
<td class="instruction">LDI</td>
<td class="comment-1" rowspan="1">Transfer a byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40793"></span>9F59</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1">Next row down</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40794"></span>9F5A</td>
<td class="instruction">DEC E</td>
<td class="comment-1" rowspan="1">Undo LDI's increment</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40795"></span>9F5B</td>
<td class="instruction">LDI</td>
<td class="comment-1" rowspan="16">Transfer six more rows</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40797"></span>9F5D</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40798"></span>9F5E</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40799"></span>9F5F</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40801"></span>9F61</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40802"></span>9F62</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40803"></span>9F63</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40805"></span>9F65</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40806"></span>9F66</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40807"></span>9F67</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40809"></span>9F69</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40810"></span>9F6A</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40811"></span>9F6B</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40813"></span>9F6D</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40814"></span>9F6E</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40815"></span>9F6F</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40817"></span>9F71</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="2">Restore <span class="register">D</span> and move to an even line</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40818"></span>9F72</td>
<td class="instruction">DEC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40819"></span>9F73</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="3">Move to the next screen row (group of 8)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40820"></span>9F74</td>
<td class="instruction">ADD A,$1F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40822"></span>9F76</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40823"></span>9F77</td>
<td class="instruction">LDI</td>
<td class="comment-1" rowspan="23">Transfer eight more rows</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40825"></span>9F79</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40826"></span>9F7A</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40827"></span>9F7B</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40829"></span>9F7D</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40830"></span>9F7E</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40831"></span>9F7F</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40833"></span>9F81</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40834"></span>9F82</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40835"></span>9F83</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40837"></span>9F85</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40838"></span>9F86</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40839"></span>9F87</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40841"></span>9F89</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40842"></span>9F8A</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40843"></span>9F8B</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40845"></span>9F8D</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40846"></span>9F8E</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40847"></span>9F8F</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40849"></span>9F91</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40850"></span>9F92</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40851"></span>9F93</td>
<td class="instruction">LDI</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40853"></span>9F95</td>
<td class="instruction">POP DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40854"></span>9F96</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="1">Move to next column</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40855"></span>9F97</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40856"></span>9F98</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9E11.html">9E11</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40775">Map</a></td>
<td class="next">
Next: <a href="9F99.html">9F99</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) © 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>