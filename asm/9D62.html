<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 9D62</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9D51.html">9D51</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40290">Map</a></td>
<td class="next">
Next: <a href="9DF4.html">9DF4</a>
</td>
</tr>
</table>
<div class="description">9D62: Update scoreboard and flashing lights</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="8401.html">main_loop</a>, <a href="873C.html">escape_scene</a> and <a href="87DC.html">setup_game</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard</td>
<td class="address-2"><span id="40290"></span>9D62</td>
<td class="instruction">LD A,($A223)</td>
<td class="comment-1" rowspan="4">Check if stage has changed?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40293"></span>9D65</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40294"></span>9D66</td>
<td class="instruction">JR NZ,<a href="9D62.html#40316">update_scoreboard_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40296"></span>9D68</td>
<td class="instruction">LD A,($8007)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40299"></span>9D6B</td>
<td class="instruction">ADD A,$B0</td>
<td class="comment-1" rowspan="1">Adding 48 to make it a digit then $80 to terminate the string.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40301"></span>9D6D</td>
<td class="instruction">LD ($9D61),A</td>
<td class="comment-1" rowspan="2">Update "STAGE N"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40304"></span>9D70</td>
<td class="instruction">LD ($A223),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40307"></span>9D73</td>
<td class="instruction">LD DE,$4486</td>
<td class="comment-1" rowspan="1">Screen pixel (48,36)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40310"></span>9D76</td>
<td class="instruction">LD HL,$9D5B</td>
<td class="comment-1" rowspan="1">Point at stage text</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40313"></span>9D79</td>
<td class="instruction">CALL <a href="9F99.html#40867">draw_string</a></td>
<td class="comment-1" rowspan="1">Draw it</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_0</td>
<td class="address-2"><span id="40316"></span>9D7C</td>
<td class="instruction">LD A,($A22C)</td>
<td class="comment-1" rowspan="3">Is the bonus flag set?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40319"></span>9D7F</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40320"></span>9D80</td>
<td class="instruction">JR Z,<a href="9D62.html#40357">update_scoreboard_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40322"></span>9D82</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Clear it</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40323"></span>9D83</td>
<td class="instruction">LD ($A22C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40326"></span>9D86</td>
<td class="instruction">LD HL,$4168</td>
<td class="comment-1" rowspan="1">Screen pixel (64,24)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40329"></span>9D89</td>
<td class="instruction">LD B,$07</td>
<td class="comment-1" rowspan="17">Clear the area 5*7 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40331"></span>9D8B</td>
<td class="instruction">LD D,H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40332"></span>9D8C</td>
<td class="instruction">LD E,L</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_1</td>
<td class="address-2"><span id="40333"></span>9D8D</td>
<td class="instruction">LD C,L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40334"></span>9D8E</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40335"></span>9D8F</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40336"></span>9D90</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40337"></span>9D91</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40338"></span>9D92</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40339"></span>9D93</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40340"></span>9D94</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40341"></span>9D95</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40342"></span>9D96</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40343"></span>9D97</td>
<td class="instruction">LD L,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40344"></span>9D98</td>
<td class="instruction">INC H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40345"></span>9D99</td>
<td class="instruction">DJNZ <a href="9D62.html#40333">update_scoreboard_1</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40347"></span>9D9B</td>
<td class="instruction">LD HL,$0000</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40350"></span>9D9E</td>
<td class="instruction">CALL <a href="9F99.html#40867">draw_string</a></td>
<td class="comment-1" rowspan="11">Draw it</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40353"></span>9DA1</td>
<td class="instruction">LD A,$08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40355"></span>9DA3</td>
<td class="instruction">JR <a href="9D62.html#40364">update_scoreboard_3</a></td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_2</td>
<td class="address-2"><span id="40357"></span>9DA5</td>
<td class="instruction">LD A,($A22D)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40360"></span>9DA8</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40361"></span>9DA9</td>
<td class="instruction">JR Z,<a href="9D62.html#40387">update_scoreboard_6</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40363"></span>9DAB</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_3</td>
<td class="address-2"><span id="40364"></span>9DAC</td>
<td class="instruction">LD ($A22D),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40367"></span>9DAF</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40369"></span>9DB1</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40370"></span>9DB2</td>
<td class="instruction">JR Z,<a href="9D62.html#40378">update_scoreboard_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40372"></span>9DB4</td>
<td class="instruction">LD C,$42</td>
<td class="comment-1" rowspan="2">42 =&gt; BRIGHT + red over black</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40374"></span>9DB6</td>
<td class="instruction">JR C,<a href="9D62.html#40378">update_scoreboard_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40376"></span>9DB8</td>
<td class="instruction">LD C,$46</td>
<td class="comment-1" rowspan="1">46 =&gt; BRIGHT + yellow over black</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_4</td>
<td class="address-2"><span id="40378"></span>9DBA</td>
<td class="instruction">LD HL,$5868</td>
<td class="comment-1" rowspan="1">Point at attributes (8,3)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40381"></span>9DBD</td>
<td class="instruction">LD B,$05</td>
<td class="comment-1" rowspan="4">Set them to <span class="register">C</span></td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_5</td>
<td class="address-2"><span id="40383"></span>9DBF</td>
<td class="instruction">LD (HL),C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40384"></span>9DC0</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40385"></span>9DC1</td>
<td class="instruction">DJNZ <a href="9D62.html#40383">update_scoreboard_5</a></td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_6</td>
<td class="address-2"><span id="40387"></span>9DC3</td>
<td class="instruction">LD HL,$A174</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40390"></span>9DC6</td>
<td class="instruction">LD A,($A253)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40393"></span>9DC9</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40394"></span>9DCA</td>
<td class="instruction">JR Z,<a href="9D62.html#40412">update_scoreboard_8</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40396"></span>9DCC</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40397"></span>9DCD</td>
<td class="instruction">LD DE,$448E</td>
<td class="comment-1" rowspan="1">Screen pixel (118,36)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40400"></span>9DD0</td>
<td class="instruction">LD HL,$9D59</td>
<td class="comment-1" rowspan="3">"LO"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40403"></span>9DD3</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40404"></span>9DD4</td>
<td class="instruction">JR Z,<a href="9D62.html#40409">update_scoreboard_7</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40406"></span>9DD6</td>
<td class="instruction">LD HL,$9D57</td>
<td class="comment-1" rowspan="1">"HI"</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_7</td>
<td class="address-2"><span id="40409"></span>9DD9</td>
<td class="instruction">CALL <a href="9F99.html#40867">draw_string</a></td>
<td class="comment-1" rowspan="6">Draw it</td>
</tr>
<tr>
<td class="asm-label">update_scoreboard_8</td>
<td class="address-2"><span id="40412"></span>9DDC</td>
<td class="instruction">LD A,($A22E)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40415"></span>9DDF</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40416"></span>9DE0</td>
<td class="instruction">LD A,($A235)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40419"></span>9DE3</td>
<td class="instruction">AND C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40420"></span>9DE4</td>
<td class="instruction">JR Z,<a href="9E11.html">plot_turbos_and_scores</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40422"></span>9DE6</td>
<td class="instruction">LD HL,$5820</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at left light's attributes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40425"></span>9DE9</td>
<td class="instruction">CALL <a href="9DF4.html">toggle_light_brightness</a></td>
<td class="comment-1" rowspan="1">Toggle its brightness</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40428"></span>9DEC</td>
<td class="instruction">LD HL,$583B</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at right light's attributes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40431"></span>9DEF</td>
<td class="instruction">CALL <a href="9DF4.html">toggle_light_brightness</a></td>
<td class="comment-1" rowspan="2">Toggle its brightness</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="40434"></span>9DF2</td>
<td class="instruction">JR <a href="9E11.html">plot_turbos_and_scores</a></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9D51.html">9D51</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40290">Map</a></td>
<td class="next">
Next: <a href="9DF4.html">9DF4</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20230404</div>
<div class="copyright">&copy; 1989 Ocean Software Ltd.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>