<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at B318</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B063.html">B063</a>
</td>
<td class="up">Up: <a href="../maps/all.html#45848">Map</a></td>
<td class="next">
Next: <a href="B457.html">B457</a>
</td>
</tr>
</table>
<div class="description">B318: Routine at B318</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="8401.html">8401</a> and <a href="852A.html">cpu_driver</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="45848"></span>B318</td>
<td class="instruction">LD HL,($A24A)</td>
<td class="comment-1" rowspan="4">If speed &gt; 0 jump $B325</td>
</tr>
<tr>
<td class="address-1"><span id="45851"></span>B31B</td>
<td class="instruction">LD A,H</td>
</tr>
<tr>
<td class="address-1"><span id="45852"></span>B31C</td>
<td class="instruction">OR L</td>
</tr>
<tr>
<td class="address-1"><span id="45853"></span>B31D</td>
<td class="instruction">JR NZ,$B325</td>
</tr>
<tr>
<td class="address-1"><span id="45855"></span>B31F</td>
<td class="instruction">LD ($B3DC),A</td>
<td class="comment-1" rowspan="166">TBD...</td>
</tr>
<tr>
<td class="address-1"><span id="45858"></span>B322</td>
<td class="instruction">LD ($A23E),A</td>
</tr>
<tr>
<td class="address-2"><span id="45861"></span>B325</td>
<td class="instruction">LD A,$00</td>
</tr>
<tr>
<td class="address-1"><span id="45863"></span>B327</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="45864"></span>B328</td>
<td class="instruction">JR Z,$B392</td>
</tr>
<tr>
<td class="address-1"><span id="45866"></span>B32A</td>
<td class="instruction">LD ($A24D),A</td>
</tr>
<tr>
<td class="address-1"><span id="45869"></span>B32D</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="address-1"><span id="45870"></span>B32E</td>
<td class="instruction">LD BC,$0000</td>
</tr>
<tr>
<td class="address-1"><span id="45873"></span>B331</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="address-1"><span id="45875"></span>B333</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="address-1"><span id="45876"></span>B334</td>
<td class="instruction">JR C,$B349</td>
</tr>
<tr>
<td class="address-1"><span id="45878"></span>B336</td>
<td class="instruction">LD D,H</td>
</tr>
<tr>
<td class="address-1"><span id="45879"></span>B337</td>
<td class="instruction">LD A,L</td>
</tr>
<tr>
<td class="address-1"><span id="45880"></span>B338</td>
<td class="instruction">SRL D</td>
</tr>
<tr>
<td class="address-1"><span id="45882"></span>B33A</td>
<td class="instruction">RR A</td>
</tr>
<tr>
<td class="address-1"><span id="45884"></span>B33C</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="address-1"><span id="45886"></span>B33E</td>
<td class="instruction">OR $03</td>
</tr>
<tr>
<td class="address-1"><span id="45888"></span>B340</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address-1"><span id="45889"></span>B341</td>
<td class="instruction">SBC HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="45891"></span>B343</td>
<td class="instruction">JR Z,$B349</td>
</tr>
<tr>
<td class="address-1"><span id="45893"></span>B345</td>
<td class="instruction">LD A,$02</td>
</tr>
<tr>
<td class="address-1"><span id="45895"></span>B347</td>
<td class="instruction">JR NC,$B350</td>
</tr>
<tr>
<td class="address-2"><span id="45897"></span>B349</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address-1"><span id="45898"></span>B34A</td>
<td class="instruction">LD ($B326),A</td>
</tr>
<tr>
<td class="address-1"><span id="45901"></span>B34D</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="address-1"><span id="45902"></span>B34E</td>
<td class="instruction">JR $B353</td>
</tr>
<tr>
<td class="address-2"><span id="45904"></span>B350</td>
<td class="instruction">LD ($A24A),HL</td>
</tr>
<tr>
<td class="address-2"><span id="45907"></span>B353</td>
<td class="instruction">LD ($A250),A</td>
</tr>
<tr>
<td class="address-1"><span id="45910"></span>B356</td>
<td class="instruction">LD HL,$0000</td>
</tr>
<tr>
<td class="address-1"><span id="45913"></span>B359</td>
<td class="instruction">LD D,H</td>
</tr>
<tr>
<td class="address-1"><span id="45914"></span>B35A</td>
<td class="instruction">LD E,L</td>
</tr>
<tr>
<td class="address-1"><span id="45915"></span>B35B</td>
<td class="instruction">SRL D</td>
</tr>
<tr>
<td class="address-1"><span id="45917"></span>B35D</td>
<td class="instruction">RR E</td>
</tr>
<tr>
<td class="address-1"><span id="45919"></span>B35F</td>
<td class="instruction">SRL E</td>
</tr>
<tr>
<td class="address-1"><span id="45921"></span>B361</td>
<td class="instruction">SRL E</td>
</tr>
<tr>
<td class="address-1"><span id="45923"></span>B363</td>
<td class="instruction">SRL E</td>
</tr>
<tr>
<td class="address-1"><span id="45925"></span>B365</td>
<td class="instruction">SBC HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="45927"></span>B367</td>
<td class="instruction">LD ($B357),HL</td>
</tr>
<tr>
<td class="address-1"><span id="45930"></span>B36A</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="address-1"><span id="45931"></span>B36B</td>
<td class="instruction">LD HL,($A26C)</td>
</tr>
<tr>
<td class="address-1"><span id="45934"></span>B36E</td>
<td class="instruction">LD C,$00</td>
</tr>
<tr>
<td class="address-1"><span id="45936"></span>B370</td>
<td class="instruction">LD A,C</td>
</tr>
<tr>
<td class="address-1"><span id="45937"></span>B371</td>
<td class="instruction">AND $01</td>
</tr>
<tr>
<td class="address-1"><span id="45939"></span>B373</td>
<td class="instruction">LD ($A251),A</td>
</tr>
<tr>
<td class="address-1"><span id="45942"></span>B376</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="address-1"><span id="45943"></span>B377</td>
<td class="instruction">JR Z,$B37F</td>
</tr>
<tr>
<td class="address-1"><span id="45945"></span>B379</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="address-1"><span id="45946"></span>B37A</td>
<td class="instruction">JR Z,$B381</td>
</tr>
<tr>
<td class="address-1"><span id="45948"></span>B37C</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="45949"></span>B37D</td>
<td class="instruction">JR $B381</td>
</tr>
<tr>
<td class="address-2"><span id="45951"></span>B37F</td>
<td class="instruction">SBC HL,DE</td>
</tr>
<tr>
<td class="address-2"><span id="45953"></span>B381</td>
<td class="instruction">LD ($A26C),HL</td>
</tr>
<tr>
<td class="address-1"><span id="45956"></span>B384</td>
<td class="instruction">LD A,$00</td>
</tr>
<tr>
<td class="address-1"><span id="45958"></span>B386</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="45959"></span>B387</td>
<td class="instruction">JR Z,$B38F</td>
</tr>
<tr>
<td class="address-1"><span id="45961"></span>B389</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="address-1"><span id="45962"></span>B38A</td>
<td class="instruction">LD ($B385),A</td>
</tr>
<tr>
<td class="address-1"><span id="45965"></span>B38D</td>
<td class="instruction">LD A,$00</td>
</tr>
<tr>
<td class="address-2"><span id="45967"></span>B38F</td>
<td class="instruction">LD ($B3DC),A</td>
</tr>
<tr>
<td class="address-2"><span id="45970"></span>B392</td>
<td class="instruction">LD HL,($A26C)</td>
</tr>
<tr>
<td class="address-1"><span id="45973"></span>B395</td>
<td class="instruction">LD DE,$0048</td>
</tr>
<tr>
<td class="address-1"><span id="45976"></span>B398</td>
<td class="instruction">LD A,H</td>
</tr>
<tr>
<td class="address-1"><span id="45977"></span>B399</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="45978"></span>B39A</td>
<td class="instruction">JP M,$B3B0</td>
</tr>
<tr>
<td class="address-1"><span id="45981"></span>B39D</td>
<td class="instruction">JR NZ,$B3A3</td>
</tr>
<tr>
<td class="address-1"><span id="45983"></span>B39F</td>
<td class="instruction">LD A,L</td>
</tr>
<tr>
<td class="address-1"><span id="45984"></span>B3A0</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="address-1"><span id="45985"></span>B3A1</td>
<td class="instruction">JR C,$B3B0</td>
</tr>
<tr>
<td class="address-2"><span id="45987"></span>B3A3</td>
<td class="instruction">LD DE,$01D8</td>
</tr>
<tr>
<td class="address-1"><span id="45990"></span>B3A6</td>
<td class="instruction">LD A,H</td>
</tr>
<tr>
<td class="address-1"><span id="45991"></span>B3A7</td>
<td class="instruction">CP D</td>
</tr>
<tr>
<td class="address-1"><span id="45992"></span>B3A8</td>
<td class="instruction">JR C,$B3B1</td>
</tr>
<tr>
<td class="address-1"><span id="45994"></span>B3AA</td>
<td class="instruction">JR NZ,$B3B0</td>
</tr>
<tr>
<td class="address-1"><span id="45996"></span>B3AC</td>
<td class="instruction">LD A,L</td>
</tr>
<tr>
<td class="address-1"><span id="45997"></span>B3AD</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="address-1"><span id="45998"></span>B3AE</td>
<td class="instruction">JR C,$B3B1</td>
</tr>
<tr>
<td class="address-2"><span id="46000"></span>B3B0</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="address-2"><span id="46001"></span>B3B1</td>
<td class="instruction">LD ($A26C),HL</td>
</tr>
<tr>
<td class="address-1"><span id="46004"></span>B3B4</td>
<td class="instruction">LD A,($A24D)</td>
</tr>
<tr>
<td class="address-1"><span id="46007"></span>B3B7</td>
<td class="instruction">LD HL,$A24F</td>
</tr>
<tr>
<td class="address-1"><span id="46010"></span>B3BA</td>
<td class="instruction">OR (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="46011"></span>B3BB</td>
<td class="instruction">LD BC,$0105</td>
</tr>
<tr>
<td class="address-1"><span id="46014"></span>B3BE</td>
<td class="instruction">CALL NZ,<a href="88F2.html">start_sfx</a></td>
</tr>
<tr>
<td class="address-1"><span id="46017"></span>B3C1</td>
<td class="instruction">LD A,($A230)</td>
</tr>
<tr>
<td class="address-1"><span id="46020"></span>B3C4</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="46021"></span>B3C5</td>
<td class="instruction">JR Z,$B3D8</td>
</tr>
<tr>
<td class="address-1"><span id="46023"></span>B3C7</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="address-1"><span id="46024"></span>B3C8</td>
<td class="instruction">JR Z,$B3D8</td>
</tr>
<tr>
<td class="address-1"><span id="46026"></span>B3CA</td>
<td class="instruction">CP $02</td>
</tr>
<tr>
<td class="address-1"><span id="46028"></span>B3CC</td>
<td class="instruction">JR C,$B3D0</td>
</tr>
<tr>
<td class="address-1"><span id="46030"></span>B3CE</td>
<td class="instruction">LD A,$02</td>
</tr>
<tr>
<td class="address-2"><span id="46032"></span>B3D0</td>
<td class="instruction">LD ($A250),A</td>
</tr>
<tr>
<td class="address-1"><span id="46035"></span>B3D3</td>
<td class="instruction">LD A,$01</td>
</tr>
<tr>
<td class="address-1"><span id="46037"></span>B3D5</td>
<td class="instruction">LD ($A251),A</td>
</tr>
<tr>
<td class="address-2"><span id="46040"></span>B3D8</td>
<td class="instruction">CALL <a href="B549.html">$B549</a></td>
</tr>
<tr>
<td class="address-1"><span id="46043"></span>B3DB</td>
<td class="instruction">LD A,$00</td>
</tr>
<tr>
<td class="address-1"><span id="46045"></span>B3DD</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="46046"></span>B3DE</td>
<td class="instruction">JR Z,$B407</td>
</tr>
<tr>
<td class="address-1"><span id="46048"></span>B3E0</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="address-1"><span id="46049"></span>B3E1</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="address-1"><span id="46050"></span>B3E2</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="address-1"><span id="46051"></span>B3E3</td>
<td class="instruction">ADD A,$18</td>
</tr>
<tr>
<td class="address-1"><span id="46053"></span>B3E5</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="address-1"><span id="46054"></span>B3E6</td>
<td class="instruction">LD A,($A250)</td>
</tr>
<tr>
<td class="address-1"><span id="46057"></span>B3E9</td>
<td class="instruction">CP $02</td>
</tr>
<tr>
<td class="address-1"><span id="46059"></span>B3EB</td>
<td class="instruction">JR C,$B3F5</td>
</tr>
<tr>
<td class="address-1"><span id="46061"></span>B3ED</td>
<td class="instruction">LD A,($A251)</td>
</tr>
<tr>
<td class="address-1"><span id="46064"></span>B3F0</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="46065"></span>B3F1</td>
<td class="instruction">JR Z,$B3F4</td>
</tr>
<tr>
<td class="address-1"><span id="46067"></span>B3F3</td>
<td class="instruction">INC C</td>
</tr>
<tr>
<td class="address-2"><span id="46068"></span>B3F4</td>
<td class="instruction">INC C</td>
</tr>
<tr>
<td class="address-2"><span id="46069"></span>B3F5</td>
<td class="instruction">EXX</td>
</tr>
<tr>
<td class="address-1"><span id="46070"></span>B3F6</td>
<td class="instruction">LD A,($A234)</td>
</tr>
<tr>
<td class="address-1"><span id="46073"></span>B3F9</td>
<td class="instruction">AND $01</td>
</tr>
<tr>
<td class="address-1"><span id="46075"></span>B3FB</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="address-1"><span id="46076"></span>B3FC</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="address-1"><span id="46077"></span>B3FD</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="address-1"><span id="46078"></span>B3FE</td>
<td class="instruction">EXX</td>
</tr>
<tr>
<td class="address-1"><span id="46079"></span>B3FF</td>
<td class="instruction">LD A,C</td>
</tr>
<tr>
<td class="address-1"><span id="46080"></span>B400</td>
<td class="instruction">CALL <a href="B67C.html#46750">$B69E</a></td>
</tr>
<tr>
<td class="address-1"><span id="46083"></span>B403</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address-1"><span id="46084"></span>B404</td>
<td class="instruction">LD ($A23E),A</td>
</tr>
<tr>
<td class="address-2"><span id="46087"></span>B407</td>
<td class="instruction">CALL <a href="B457.html">$B457</a></td>
</tr>
<tr>
<td class="address-1"><span id="46090"></span>B40A</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="address-1"><span id="46092"></span>B40C</td>
<td class="instruction">LD A,($A23E)</td>
</tr>
<tr>
<td class="address-1"><span id="46095"></span>B40F</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="address-1"><span id="46096"></span>B410</td>
<td class="instruction">JR NZ,$B41B</td>
</tr>
<tr>
<td class="address-1"><span id="46098"></span>B412</td>
<td class="instruction">LD A,($A236)</td>
</tr>
<tr>
<td class="address-1"><span id="46101"></span>B415</td>
<td class="instruction">AND $01</td>
</tr>
<tr>
<td class="address-1"><span id="46103"></span>B417</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="address-1"><span id="46104"></span>B418</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address-1"><span id="46105"></span>B419</td>
<td class="instruction">ADD A,B</td>
</tr>
<tr>
<td class="address-1"><span id="46106"></span>B41A</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="address-2"><span id="46107"></span>B41B</td>
<td class="instruction">LD A,($A250)</td>
</tr>
<tr>
<td class="address-1"><span id="46110"></span>B41E</td>
<td class="instruction">CALL <a href="B58E.html">draw_car</a></td>
</tr>
<tr>
<td class="address-1"><span id="46113"></span>B421</td>
<td class="instruction">LD A,($A228)</td>
</tr>
<tr>
<td class="address-1"><span id="46116"></span>B424</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="46117"></span>B425</td>
<td class="instruction">JR Z,$B42E</td>
</tr>
<tr>
<td class="address-1"><span id="46119"></span>B427</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address-1"><span id="46120"></span>B428</td>
<td class="instruction">LD BC,$0102</td>
</tr>
<tr>
<td class="address-1"><span id="46123"></span>B42B</td>
<td class="instruction">CALL <a href="B67C.html">$B67C</a></td>
</tr>
<tr>
<td class="address-2"><span id="46126"></span>B42E</td>
<td class="instruction">LD A,($A234)</td>
</tr>
<tr>
<td class="address-1"><span id="46129"></span>B431</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="address-1"><span id="46130"></span>B432</td>
<td class="instruction">LD HL,$A24D</td>
</tr>
<tr>
<td class="address-1"><span id="46133"></span>B435</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="46134"></span>B436</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="46135"></span>B437</td>
<td class="instruction">JR NZ,$B449</td>
</tr>
<tr>
<td class="address-1"><span id="46137"></span>B439</td>
<td class="instruction">LD A,($A236)</td>
</tr>
<tr>
<td class="address-1"><span id="46140"></span>B43C</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="address-1"><span id="46141"></span>B43D</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="46142"></span>B43E</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="46143"></span>B43F</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="46144"></span>B440</td>
<td class="instruction">OR (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="46145"></span>B441</td>
<td class="instruction">JR NZ,$B449</td>
</tr>
<tr>
<td class="address-1"><span id="46147"></span>B443</td>
<td class="instruction">LD A,($A23E)</td>
</tr>
<tr>
<td class="address-1"><span id="46150"></span>B446</td>
<td class="instruction">CP $02</td>
</tr>
<tr>
<td class="address-1"><span id="46152"></span>B448</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="address-2"><span id="46153"></span>B449</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address-1"><span id="46154"></span>B44A</td>
<td class="instruction">EX AF,AF'</td>
</tr>
<tr>
<td class="address-1"><span id="46155"></span>B44B</td>
<td class="instruction">LD A,B</td>
</tr>
<tr>
<td class="address-1"><span id="46156"></span>B44C</td>
<td class="instruction">PUSH AF</td>
</tr>
<tr>
<td class="address-1"><span id="46157"></span>B44D</td>
<td class="instruction">CALL <a href="B648.html">$B648</a></td>
</tr>
<tr>
<td class="address-1"><span id="46160"></span>B450</td>
<td class="instruction">LD A,$01</td>
</tr>
<tr>
<td class="address-1"><span id="46162"></span>B452</td>
<td class="instruction">EX AF,AF'</td>
</tr>
<tr>
<td class="address-1"><span id="46163"></span>B453</td>
<td class="instruction">POP AF</td>
</tr>
<tr>
<td class="address-1"><span id="46164"></span>B454</td>
<td class="instruction">JP <a href="B648.html">$B648</a></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="B063.html">B063</a>
</td>
<td class="up">Up: <a href="../maps/all.html#45848">Map</a></td>
<td class="next">
Next: <a href="B457.html">B457</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20230426</div>
<div class="copyright">&copy; 1989 Ocean Software Ltd.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>