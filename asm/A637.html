<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at A637</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A623.html">A623</a>
</td>
<td class="up">Up: <a href="../maps/all.html#42551">Map</a></td>
<td class="next">
Next: <a href="A7E7.html">A7E7</a>
</td>
</tr>
</table>
<div class="description">A637: Smash handling</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This gets called whenever the perp is within sight of the hero car.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">smash_handler</td>
<td class="address-2"><span id="42551"></span>A637</td>
<td class="instruction">LD A,($A230)</td>
<td class="comment-1" rowspan="3">Return if perp_caught_stage &gt; 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42554"></span>A63A</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42555"></span>A63B</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42556"></span>A63C</td>
<td class="instruction">LD A,($A22E)</td>
<td class="comment-1" rowspan="3">Call perp_sighted if sighted_flag is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42559"></span>A63F</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42560"></span>A640</td>
<td class="instruction">CALL Z,<a href="B4CC.html">perp_sighted</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42563"></span>A643</td>
<td class="instruction">LD A,(IX+$07)</td>
<td class="comment-1" rowspan="1">A = IX[7]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42566"></span>A646</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42567"></span>A647</td>
<td class="instruction">JR Z,<a href="A637.html#42576">smash_handler_0</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42569"></span>A649</td>
<td class="instruction">JP P,<a href="A637.html#42890">smash_handler_21</a></td>
<td class="comment-1" rowspan="1">Jump if positive</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42572"></span>
<div class="comments">
<div class="paragraph">
Otherwise A is negative.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42572"></span>A64C</td>
<td class="instruction">INC (IX+$07)</td>
<td class="comment-1" rowspan="1">IX[7]++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42575"></span>A64F</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if non-zero</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42576"></span>
<div class="comments">
<div class="paragraph">
A must be zero to arrive here.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">smash_handler_0</td>
<td class="address-2"><span id="42576"></span>A650</td>
<td class="instruction">PUSH IY</td>
<td class="comment-1" rowspan="1">Preserve IY</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42578"></span>A652</td>
<td class="instruction">LD C,(IX+$01)</td>
<td class="comment-1" rowspan="1">C = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42581"></span>A655</td>
<td class="instruction">LD B,$05</td>
<td class="comment-1" rowspan="1">5 iterations</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42583"></span>A657</td>
<td class="instruction">LD IY,$A19C</td>
<td class="comment-1" rowspan="1">IY = &amp;hazards[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42587"></span>A65B</td>
<td class="instruction">LD DE,$0014</td>
<td class="comment-1" rowspan="1">DE = 20  stride of hazards</td>
</tr>
<tr>
<td class="asm-label">sh_a65e_loop</td>
<td class="address-2"><span id="42590"></span>A65E</td>
<td class="instruction">RLC (IY+$00)</td>
<td class="comment-1" rowspan="2">If the hazard is active then jump to <a href="A637.html#42604">smash_handler_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42594"></span>A662</td>
<td class="instruction">JR C,<a href="A637.html#42604">smash_handler_2</a></td>
</tr>
<tr>
<td class="asm-label">smash_handler_1</td>
<td class="address-2"><span id="42596"></span>A664</td>
<td class="instruction">ADD IY,DE</td>
<td class="comment-1" rowspan="1">Move to next hazard</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42598"></span>A666</td>
<td class="instruction">DJNZ <a href="A637.html#42590">sh_a65e_loop</a></td>
<td class="comment-1" rowspan="1">Loop while <span class="register">B</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42600"></span>A668</td>
<td class="instruction">POP IY</td>
<td class="comment-1" rowspan="1">Restore IY</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42602"></span>A66A</td>
<td class="instruction">JR <a href="A637.html#42639">smash_handler_5</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A637.html#42639">smash_handler_5</a></td>
</tr>
<tr>
<td class="asm-label">smash_handler_2</td>
<td class="address-2"><span id="42604"></span>A66C</td>
<td class="instruction">LD A,(IY+$0F)</td>
<td class="comment-1" rowspan="1">A = IY[15]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42607"></span>A66F</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42608"></span>A670</td>
<td class="instruction">JP NC,<a href="A637.html#42596">smash_handler_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42611"></span>A673</td>
<td class="instruction">LD A,(IY+$01)</td>
<td class="comment-1" rowspan="2">A = IY[1] - C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42614"></span>A676</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42615"></span>A677</td>
<td class="instruction">JP NC,<a href="A637.html#42622">smash_handler_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42618"></span>A67A</td>
<td class="instruction">ADD A,$02</td>
<td class="comment-1" rowspan="1">A += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42620"></span>A67C</td>
<td class="instruction">JR <a href="A637.html#42624">smash_handler_4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_3</td>
<td class="address-2"><span id="42622"></span>A67E</td>
<td class="instruction">SUB $03</td>
<td class="comment-1" rowspan="1">A -= 3</td>
</tr>
<tr>
<td class="asm-label">smash_handler_4</td>
<td class="address-2"><span id="42624"></span>A680</td>
<td class="instruction">JR NC,<a href="A637.html#42596">smash_handler_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42626"></span>A682</td>
<td class="instruction">LD A,(IY+$11)</td>
<td class="comment-1" rowspan="1">A = IY[17]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42629"></span>A685</td>
<td class="instruction">CP (IX+$12)</td>
<td class="comment-1" rowspan="1">CP IX[18]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42632"></span>A688</td>
<td class="instruction">JP NZ,<a href="A637.html#42596">smash_handler_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42635"></span>A68B</td>
<td class="instruction">POP IY</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42637"></span>A68D</td>
<td class="instruction">JR <a href="A637.html#42712">smash_handler_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_5</td>
<td class="address-2"><span id="42639"></span>A68F</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42641"></span>A691</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42642"></span>A692</td>
<td class="instruction">JR NZ,<a href="A637.html#42742">smash_handler_11</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42644"></span>A694</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1">A = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42647"></span>A697</td>
<td class="instruction">CP $07</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 7</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42649"></span>A699</td>
<td class="instruction">JR NC,<a href="A637.html#42742">smash_handler_11</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42651"></span>
<div class="comments">
<div class="paragraph">
Inline decrementing counter.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42651"></span>A69B</td>
<td class="instruction">LD A,$14</td>
<td class="comment-1" rowspan="2">A = &lt;self modified&gt; - 1  -- self modified below</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42653"></span>A69D</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42654"></span>A69E</td>
<td class="instruction">JR NZ,<a href="A637.html#42667">smash_handler_6</a></td>
<td class="comment-1" rowspan="1">Jump if != 0</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42656"></span>
<div class="comments">
<div class="paragraph">
When it hits zero we pick a random number...
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42656"></span>A6A0</td>
<td class="instruction">INC C</td>
<td class="comment-1" rowspan="1">-- why increment C when it's overwritten next?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42657"></span>A6A1</td>
<td class="instruction">CALL <a href="9618.html#38427">rng</a></td>
<td class="comment-1" rowspan="3">C = rng() &amp; $1F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42660"></span>A6A4</td>
<td class="instruction">AND $1F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42662"></span>A6A6</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42663"></span>
<div class="comments">
<div class="paragraph">
This gets hit at some point during the smash process.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42663"></span>A6A7</td>
<td class="instruction">LD A,($5D1B)</td>
<td class="comment-1" rowspan="2">A = smash_5d1b + C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42666"></span>A6AA</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label">smash_handler_6</td>
<td class="address-2"><span id="42667"></span>A6AB</td>
<td class="instruction">LD ($A69C),A</td>
<td class="comment-1" rowspan="1">*$A69C = A  -- Self modify LD A at <a href="A637.html#42651">A69B</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42670"></span>
<div class="comments">
<div class="paragraph">
This smells like it's detecting position and turning that into lanes. The values are like those used by get_spawn_lanes.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42670"></span>A6AE</td>
<td class="instruction">LD HL,($A26C)</td>
<td class="comment-1" rowspan="3">HL = road_pos - 164</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42673"></span>A6B1</td>
<td class="instruction">LD DE,$00A4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42676"></span>A6B4</td>
<td class="instruction">SBC HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42678"></span>A6B6</td>
<td class="instruction">LD BC,$0404</td>
<td class="comment-1" rowspan="1">BC = $0404</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42681"></span>A6B9</td>
<td class="instruction">JR C,<a href="A637.html#42703">sh_a6cf</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A637.html#42703">sh_a6cf</a> if HL &lt; 164</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42683"></span>A6BB</td>
<td class="instruction">LD E,$46</td>
<td class="comment-1" rowspan="1">DE = $0046</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42685"></span>A6BD</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">BC = $0304</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42686"></span>A6BE</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE  -- includes previous</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42688"></span>A6C0</td>
<td class="instruction">JR C,<a href="A637.html#42703">sh_a6cf</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A637.html#42703">sh_a6cf</a> if HL &lt; 70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42690"></span>A6C2</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="2">BC = $0203</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42691"></span>A6C3</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42692"></span>A6C4</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE  -- includes previous</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42694"></span>A6C6</td>
<td class="instruction">JR C,<a href="A637.html#42703">sh_a6cf</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A637.html#42703">sh_a6cf</a> if HL &lt; 70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42696"></span>A6C8</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="2">BC = $0102</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42697"></span>A6C9</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42698"></span>A6CA</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE  -- includes previous</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42700"></span>A6CC</td>
<td class="instruction">JR C,<a href="A637.html#42703">sh_a6cf</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A637.html#42703">sh_a6cf</a> if HL &lt; 70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42702"></span>A6CE</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1">BC = $0101</td>
</tr>
<tr>
<td class="asm-label">sh_a6cf</td>
<td class="address-2"><span id="42703"></span>A6CF</td>
<td class="instruction">LD A,(IX+$12)</td>
<td class="comment-1" rowspan="1">A = IX[18]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42706"></span>A6D2</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42707"></span>A6D3</td>
<td class="instruction">JR Z,<a href="A637.html#42712">smash_handler_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42709"></span>A6D5</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42710"></span>A6D6</td>
<td class="instruction">JR NZ,<a href="A637.html#42742">smash_handler_11</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_7</td>
<td class="address-2"><span id="42712"></span>A6D8</td>
<td class="instruction">LD C,(IX+$12)</td>
<td class="comment-1" rowspan="1">C = IX[18]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42715"></span>A6DB</td>
<td class="instruction">CALL <a href="9618.html#38427">rng</a></td>
<td class="comment-1" rowspan="1">Call rng</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42718"></span>A6DE</td>
<td class="instruction">INC C</td>
<td class="comment-1" rowspan="1">C++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42719"></span>A6DF</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42720"></span>A6E0</td>
<td class="instruction">JP P,<a href="A637.html#42725">smash_handler_8</a></td>
<td class="comment-1" rowspan="1">Jump if positive</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42723"></span>A6E3</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="2">C -= 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42724"></span>A6E4</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="asm-label">smash_handler_8</td>
<td class="address-2"><span id="42725"></span>A6E5</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1">A = C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42726"></span>A6E6</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42727"></span>A6E7</td>
<td class="instruction">LD C,$02</td>
<td class="comment-1" rowspan="1">C = 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42729"></span>A6E9</td>
<td class="instruction">JP Z,<a href="A637.html#42738">smash_handler_9</a></td>
<td class="comment-1" rowspan="1">Jump if A is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42732"></span>A6EC</td>
<td class="instruction">CP $05</td>
<td class="comment-1" rowspan="2">Jump if A &lt; 5</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42734"></span>A6EE</td>
<td class="instruction">JR C,<a href="A637.html#42739">smash_handler_10</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42736"></span>A6F0</td>
<td class="instruction">LD C,$FE</td>
<td class="comment-1" rowspan="1">C = $FE</td>
</tr>
<tr>
<td class="asm-label">smash_handler_9</td>
<td class="address-2"><span id="42738"></span>A6F2</td>
<td class="instruction">ADD A,C</td>
<td class="comment-1" rowspan="1">A += C</td>
</tr>
<tr>
<td class="asm-label">smash_handler_10</td>
<td class="address-2"><span id="42739"></span>A6F3</td>
<td class="instruction">LD (IX+$12),A</td>
<td class="comment-1" rowspan="1">IX[18] = A</td>
</tr>
<tr>
<td class="asm-label">smash_handler_11</td>
<td class="address-2"><span id="42742"></span>A6F6</td>
<td class="instruction">LD C,(IX+$01)</td>
<td class="comment-1" rowspan="1">C = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42745"></span>A6F9</td>
<td class="instruction">CALL <a href="A89C.html">get_spawn_lanes</a></td>
<td class="comment-1" rowspan="1">Call get_spawn_lanes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42748"></span>A6FC</td>
<td class="instruction">LD A,(IX+$12)</td>
<td class="comment-1" rowspan="1">A = IX[18]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42751"></span>A6FF</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42752"></span>A700</td>
<td class="instruction">JR NC,<a href="A637.html#42759">smash_handler_12</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42754"></span>A702</td>
<td class="instruction">ADD A,$02</td>
<td class="comment-1" rowspan="1">A += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42756"></span>A704</td>
<td class="instruction">LD (IX+$12),A</td>
<td class="comment-1" rowspan="1">IX[18] = A</td>
</tr>
<tr>
<td class="asm-label">smash_handler_12</td>
<td class="address-2"><span id="42759"></span>A707</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42760"></span>A708</td>
<td class="instruction">JR Z,<a href="A637.html#42769">smash_handler_13</a></td>
<td class="comment-1" rowspan="2">Jump to <a href="A637.html#42769">smash_handler_13</a> if A &lt;= C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42762"></span>A70A</td>
<td class="instruction">JR C,<a href="A637.html#42769">smash_handler_13</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42764"></span>A70C</td>
<td class="instruction">SUB $02</td>
<td class="comment-1" rowspan="1">A -= 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42766"></span>A70E</td>
<td class="instruction">LD (IX+$12),A</td>
<td class="comment-1" rowspan="1">IX[18] = A</td>
</tr>
<tr>
<td class="asm-label">smash_handler_13</td>
<td class="address-2"><span id="42769"></span>A711</td>
<td class="instruction">LD A,(IX+$12)</td>
<td class="comment-1" rowspan="1">A = IX[18]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42772"></span>A714</td>
<td class="instruction">LD HL,$A7E6</td>
<td class="comment-1" rowspan="1">HL = $A7E6 -&gt; <a href="A7E7.html">table_a7e7</a> data block</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42775"></span>A717</td>
<td class="instruction">ADD A,L</td>
<td class="comment-1" rowspan="1">A += L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42776"></span>A718</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42777"></span>A719</td>
<td class="instruction">LD A,(IX+$05)</td>
<td class="comment-1" rowspan="1">A = IX[5]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42780"></span>A71C</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">CP *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42781"></span>A71D</td>
<td class="instruction">LD C,$01</td>
<td class="comment-1" rowspan="1">C = 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42783"></span>A71F</td>
<td class="instruction">JR Z,<a href="A637.html#42805">smash_handler_16</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42785"></span>A721</td>
<td class="instruction">JR C,<a href="A637.html#42798">smash_handler_15</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42787"></span>A723</td>
<td class="instruction">SUB $0A</td>
<td class="comment-1" rowspan="1">A -= 10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42789"></span>A725</td>
<td class="instruction">JR C,<a href="A637.html#42794">smash_handler_14</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42791"></span>A727</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">CP *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42792"></span>A728</td>
<td class="instruction">JR NC,<a href="A637.html#42807">smash_handler_17</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_14</td>
<td class="address-2"><span id="42794"></span>A72A</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1">C--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42795"></span>A72B</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42796"></span>A72C</td>
<td class="instruction">JR <a href="A637.html#42807">smash_handler_17</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_15</td>
<td class="address-2"><span id="42798"></span>A72E</td>
<td class="instruction">ADD A,$0A</td>
<td class="comment-1" rowspan="1">A += 10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42800"></span>A730</td>
<td class="instruction">JR C,<a href="A637.html#42805">smash_handler_16</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42802"></span>A732</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">CP *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42803"></span>A733</td>
<td class="instruction">JR C,<a href="A637.html#42807">smash_handler_17</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">smash_handler_16</td>
<td class="address-2"><span id="42805"></span>A735</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1">C--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42806"></span>A736</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label">smash_handler_17</td>
<td class="address-2"><span id="42807"></span>A737</td>
<td class="instruction">LD (IX+$05),A</td>
<td class="comment-1" rowspan="1">IX[5] = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42810"></span>A73A</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="2">Self modify 'LD A' @ <a href="A637.html#42639">smash_handler_5</a> to load C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42811"></span>A73B</td>
<td class="instruction">LD ($A690),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42814"></span>A73E</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = &lt;self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42816"></span>A740</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42817"></span>A741</td>
<td class="instruction">LD DE,$001E</td>
<td class="comment-1" rowspan="1">DE = $1E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42820"></span>A744</td>
<td class="instruction">LD HL,$00E6</td>
<td class="comment-1" rowspan="1">HL = $E6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42823"></span>A747</td>
<td class="instruction">JR NZ,<a href="A637.html#42850">smash_handler_18</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42825"></span>A749</td>
<td class="instruction">LD A,$14</td>
<td class="comment-1" rowspan="1">A = &lt;self modified&gt;  -- Self modified below</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42827"></span>A74B</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42828"></span>A74C</td>
<td class="instruction">LD ($A74A),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A' @ <a href="A637.html#42825">A749</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42831"></span>A74F</td>
<td class="instruction">JR NZ,<a href="A637.html#42870">smash_handler_19</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42833"></span>A751</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42834"></span>A752</td>
<td class="instruction">CALL <a href="9618.html#38427">rng</a></td>
<td class="comment-1" rowspan="1">Call rng</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42837"></span>A755</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42838"></span>A756</td>
<td class="instruction">AND $0F</td>
<td class="comment-1" rowspan="2">C = A &amp; 15  mask random value</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42840"></span>A758</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42841"></span>A759</td>
<td class="instruction">LD A,($5D1C)</td>
<td class="comment-1" rowspan="2">A = ($5D1C) + C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42844"></span>A75C</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42845"></span>A75D</td>
<td class="instruction">LD ($A74A),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A' @ <a href="A637.html#42825">A749</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42848"></span>A760</td>
<td class="instruction">LD A,$0A</td>
<td class="comment-1" rowspan="1">A = 10</td>
</tr>
<tr>
<td class="asm-label">smash_handler_18</td>
<td class="address-2"><span id="42850"></span>A762</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42851"></span>A763</td>
<td class="instruction">LD ($A73F),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A' @ <a href="A637.html#42814">A73E</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42854"></span>A766</td>
<td class="instruction">JR Z,<a href="A637.html#42870">smash_handler_19</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42856"></span>A768</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1">A = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42859"></span>A76B</td>
<td class="instruction">CP $0D</td>
<td class="comment-1" rowspan="1">CP 13</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42861"></span>A76D</td>
<td class="instruction">JR NC,<a href="A637.html#42870">smash_handler_19</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42863"></span>A76F</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="3">B = (13 - A)  -- iterations</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42864"></span>A770</td>
<td class="instruction">ADD A,$0E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42866"></span>A772</td>
<td class="instruction">LD B,A</td>
</tr>
<tr>
<td class="asm-label">sh_a773_loop</td>
<td class="address-2"><span id="42867"></span>A773</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">HL += DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42868"></span>A774</td>
<td class="instruction">DJNZ <a href="A637.html#42867">sh_a773_loop</a></td>
<td class="comment-1" rowspan="1">Loop to loop_a773 while B</td>
</tr>
<tr>
<td class="asm-label">smash_handler_19</td>
<td class="address-2"><span id="42870"></span>A776</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="2">A = IX[1] - 6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42873"></span>A779</td>
<td class="instruction">SUB $06</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42875"></span>A77B</td>
<td class="instruction">JR NC,<a href="A637.html#42883">smash_handler_20</a></td>
<td class="comment-1" rowspan="1">Jump if A &gt;= 6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42877"></span>A77D</td>
<td class="instruction">ADD A,$05</td>
<td class="comment-1" rowspan="4">A = (A + 5) * 8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42879"></span>A77F</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42880"></span>A780</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42881"></span>A781</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42882"></span>A782</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">HL += DE</td>
</tr>
<tr>
<td class="asm-label">smash_handler_20</td>
<td class="address-2"><span id="42883"></span>A783</td>
<td class="instruction">LD (IX+$0D),L</td>
<td class="comment-1" rowspan="2">wordat(IX + 13) = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42886"></span>A786</td>
<td class="instruction">LD (IX+$0E),H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42889"></span>A789</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">smash_handler_21</td>
<td class="address-2"><span id="42890"></span>A78A</td>
<td class="instruction">LD (IX+$07),$FC</td>
<td class="comment-1" rowspan="1">IX[7] = $FC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42894"></span>A78E</td>
<td class="instruction">CP $03</td>
<td class="comment-1" rowspan="3">Jump if A &lt; 3 -- preserve A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42896"></span>A790</td>
<td class="instruction">PUSH AF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42897"></span>A791</td>
<td class="instruction">JR C,<a href="A637.html#42901">smash_handler_22</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42899"></span>A793</td>
<td class="instruction">SUB $03</td>
<td class="comment-1" rowspan="1">A -= 3</td>
</tr>
<tr>
<td class="asm-label">smash_handler_22</td>
<td class="address-2"><span id="42901"></span>A795</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1">Bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42902"></span>A796</td>
<td class="instruction">LD A,($A24E)</td>
<td class="comment-1" rowspan="1">Load turbo boost time remaining (60..0)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42905"></span>A799</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42906"></span>A79A</td>
<td class="instruction">LD A,$C8</td>
<td class="comment-1" rowspan="1">A = $C8  -- value for when not turbo boosting</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42908"></span>A79C</td>
<td class="instruction">JR Z,<a href="A637.html#42912">smash_handler_23</a></td>
<td class="comment-1" rowspan="1">Jump if no turbo boost</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42910"></span>A79E</td>
<td class="instruction">LD A,$E6</td>
<td class="comment-1" rowspan="1">A = $E6  -- value for when turbo boosting</td>
</tr>
<tr>
<td class="asm-label">smash_handler_23</td>
<td class="address-2"><span id="42912"></span>A7A0</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42913"></span>A7A1</td>
<td class="instruction">CALL <a href="A399.html#42168">check_collisions_8</a></td>
<td class="comment-1" rowspan="1">(crash testing stuff...)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42916"></span>A7A4</td>
<td class="instruction">LD HL,($B32F)</td>
<td class="comment-1" rowspan="1">Read HL from 'LD BC' @ <a href="B318.html#45870">B32E</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42919"></span>A7A7</td>
<td class="instruction">LD DE,$0028</td>
<td class="comment-1" rowspan="2">HL += 40</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42922"></span>A7AA</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42923"></span>A7AB</td>
<td class="instruction">LD ($B32F),HL</td>
<td class="comment-1" rowspan="1">($B32F) = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42926"></span>A7AE</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="1">D = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42928"></span>A7B0</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">-- restore A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42929"></span>A7B1</td>
<td class="instruction">LD HL,$B4F0</td>
<td class="comment-1" rowspan="1">HL = <a href="B4F0.html">smash</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42932"></span>A7B4</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42933"></span>A7B5</td>
<td class="instruction">JR NC,<a href="A637.html#42942">smash_handler_24</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42935"></span>A7B7</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42937"></span>A7B9</td>
<td class="instruction">JR Z,<a href="A637.html#42942">smash_handler_24</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42939"></span>A7BB</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42940"></span>A7BC</td>
<td class="instruction">LD D,$04</td>
<td class="comment-1" rowspan="1">D = 4</td>
</tr>
<tr>
<td class="asm-label">smash_handler_24</td>
<td class="address-2"><span id="42942"></span>A7BE</td>
<td class="instruction">LD A,($8007)</td>
<td class="comment-1" rowspan="3">D = wanted_stage_number + D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42945"></span>A7C1</td>
<td class="instruction">ADD A,D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42946"></span>A7C2</td>
<td class="instruction">LD D,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42947"></span>A7C3</td>
<td class="instruction">LD E,$00</td>
<td class="comment-1" rowspan="1">E = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42949"></span>A7C5</td>
<td class="instruction">LD A,($8006)</td>
<td class="comment-1" rowspan="3">Jump if retry_count is zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42952"></span>A7C8</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42953"></span>A7C9</td>
<td class="instruction">JR Z,<a href="A637.html#42962">smash_handler_25</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42955"></span>A7CB</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1">Middle digit(s) of bonus</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42956"></span>A7CC</td>
<td class="instruction">LD D,E</td>
<td class="comment-1" rowspan="1">Set top two digits of bonus</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42957"></span>A7CD</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="4">Move middle digit into position</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42958"></span>A7CE</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42959"></span>A7CF</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42960"></span>A7D0</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42961"></span>A7D1</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">Set middle digits of bonus</td>
</tr>
<tr>
<td class="asm-label">smash_handler_25</td>
<td class="address-2"><span id="42962"></span>A7D2</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">Clear low digits of bonus</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42963"></span>A7D3</td>
<td class="instruction">CALL <a href="9CD6.html">bonus</a></td>
<td class="comment-1" rowspan="1">Call bonus</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42966"></span>A7D6</td>
<td class="instruction">LD A,$05</td>
<td class="comment-1" rowspan="1">A = 5</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42968"></span>A7D8</td>
<td class="instruction">LD ($A73F),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A' @ <a href="A637.html#42814">A73E</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42971"></span>A7DB</td>
<td class="instruction">LD HL,$98D6</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at smash_chatter ("BEAR DOWN" / "OH MAN" / etc.)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42974"></span>A7DE</td>
<td class="instruction">CALL <a href="9945.html">chatter</a></td>
<td class="comment-1" rowspan="1">Call chatter (priority 5)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42977"></span>A7E1</td>
<td class="instruction">LD BC,$0301</td>
<td class="comment-1" rowspan="1">BC = $0301</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42980"></span>A7E4</td>
<td class="instruction">JP <a href="88F2.html">start_sfx</a></td>
<td class="comment-1" rowspan="1">Exit via start_sfx</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A623.html">A623</a>
</td>
<td class="up">Up: <a href="../maps/all.html#42551">Map</a></td>
<td class="next">
Next: <a href="A7E7.html">A7E7</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) Â© 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>