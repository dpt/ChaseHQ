<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 8258</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="8204.html">8204</a>
</td>
<td class="up">Up: <a href="../maps/all.html#33368">Map</a></td>
<td class="next">
Next: <a href="837C.html">837C</a>
</td>
</tr>
</table>
<div class="description">8258: Attract mode</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="83B5.html">start_siren_hook</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">attract_mode</td>
<td class="address-2"><span id="33368"></span>8258</td>
<td class="instruction">LD HL,$5D2B</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span> -&gt; attract_data</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33371"></span>825B</td>
<td class="instruction">CALL <a href="87DC.html">setup_game</a></td>
<td class="comment-1" rowspan="1">Call setup_game</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33374"></span>825E</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Reset credits/copyright message blinker to show credits</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33375"></span>825F</td>
<td class="instruction">LD ($828C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33378"></span>8262</td>
<td class="instruction">LD HL,$0190</td>
<td class="comment-1" rowspan="2">Set speed to $190</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33381"></span>8265</td>
<td class="instruction">LD ($A24A),HL</td>
</tr>
<tr>
<td class="asm-label">attract_mode_0</td>
<td class="address-2"><span id="33384"></span>8268</td>
<td class="instruction">CALL <a href="A0CC.html#41174">keyscan</a></td>
<td class="comment-1" rowspan="1">Call keyscan</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33387"></span>826B</td>
<td class="instruction">AND $10</td>
<td class="comment-1" rowspan="2">Return if fire was pressed</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33389"></span>826D</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33390"></span>826E</td>
<td class="instruction">CALL <a href="852A.html">cpu_driver</a></td>
<td class="comment-1" rowspan="1">Call cpu_driver</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="33393"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="F220.html">page_in_stage_128k</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">attract_mode_1</td>
<td class="address-2"><span id="33393"></span>8271</td>
<td class="instruction">LD HL,$82A6</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span> -&gt; attract mode messages "CHASE HQ" "PRESS GEAR TO PLAY" ...</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33396"></span>8274</td>
<td class="instruction">LD B,$01</td>
<td class="comment-1" rowspan="1">Number of messages?</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="33398"></span>
<div class="comments">
<div class="paragraph">
Blink "PRESS GEAR TO PLAY".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33398"></span>8276</td>
<td class="instruction">LD A,$F0</td>
<td class="comment-1" rowspan="1">A = &lt;initally $F0, self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33400"></span>8278</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1">Rotate</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33401"></span>8279</td>
<td class="instruction">LD ($8277),A</td>
<td class="comment-1" rowspan="1">Self modify above</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33404"></span>827C</td>
<td class="instruction">JR C,<a href="8258.html#33407">attract_mode_2</a></td>
<td class="comment-1" rowspan="1">If carry set the hide the final message</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33406"></span>827E</td>
<td class="instruction">INC B</td>
<td class="comment-1" rowspan="1">Otherwise include it</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="33407"></span>
<div class="comments">
<div class="paragraph">
Display 'B' messages.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">attract_mode_2</td>
<td class="address-2"><span id="33407"></span>827F</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">Load flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33408"></span>8280</td>
<td class="instruction">CALL <a href="8E6C.html">print_message</a></td>
<td class="comment-1" rowspan="1">Call print_message</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33411"></span>8283</td>
<td class="instruction">DJNZ <a href="8258.html#33407">attract_mode_2</a></td>
<td class="comment-1" rowspan="1">Loop while <span class="register">B</span> &gt; 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33413"></span>8285</td>
<td class="instruction">LD A,($A231)</td>
<td class="comment-1" rowspan="3">Jump if transition_control &gt; 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33416"></span>8288</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33417"></span>8289</td>
<td class="instruction">JR NZ,<a href="8258.html#33437">attract_mode_4</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="33419"></span>
<div class="comments">
<div class="paragraph">
Alternate between credits and copyright messages.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33419"></span>828B</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="3">Blinking on/off self modified pattern</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33421"></span>828D</td>
<td class="instruction">XOR $01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33423"></span>828F</td>
<td class="instruction">LD ($828C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33426"></span>8292</td>
<td class="instruction">LD HL,$82CC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span> -&gt; credits_messages</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33429"></span>8295</td>
<td class="instruction">JR NZ,<a href="8258.html#33434">attract_mode_3</a></td>
<td class="comment-1" rowspan="1">Skip next LD HL based on blink above</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33431"></span>8297</td>
<td class="instruction">LD HL,$8320</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span> -&gt; copyright_messages</td>
</tr>
<tr>
<td class="asm-label">attract_mode_3</td>
<td class="address-2"><span id="33434"></span>829A</td>
<td class="instruction">CALL <a href="8E7E.html">message_printing_related</a></td>
<td class="comment-1" rowspan="1">Call message_printing_related</td>
</tr>
<tr>
<td class="asm-label">attract_mode_4</td>
<td class="address-2"><span id="33437"></span>829D</td>
<td class="instruction">CALL <a href="8D8F.html">transition</a></td>
<td class="comment-1" rowspan="1">Call transition</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33440"></span>82A0</td>
<td class="instruction">CALL <a href="BC3E.html">draw_screen</a></td>
<td class="comment-1" rowspan="1">Call draw_screen</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33443"></span>82A3</td>
<td class="instruction">JP <a href="8258.html#33384">attract_mode_0</a></td>
<td class="comment-1" rowspan="1">Loop</td>
</tr>
<tr>
<td class="asm-label">attract_messages</td>
<td class="address-1"><span id="33446"></span>82A6</td>
<td class="instruction">DEFB $03</td>
<td class="comment-1" rowspan="1">Flags (double height)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33447"></span>82A7</td>
<td class="instruction">DEFB $00</td>
<td class="comment-1" rowspan="1">Attribute (black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33448"></span>82A8</td>
<td class="instruction">DEFW $F02C</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33450"></span>82AA</td>
<td class="instruction">DEFW $594C</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33452"></span>82AC</td>
<td class="instruction">DEFM "CHASE H",$D1</td>
<td class="comment-1" rowspan="1">"CHASE HQ"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33460"></span>82B4</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33461"></span>82B5</td>
<td class="instruction">DEFB $00</td>
<td class="comment-1" rowspan="1">Attribute (black)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33462"></span>82B6</td>
<td class="instruction">DEFW $F847</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33464"></span>82B8</td>
<td class="instruction">DEFW $59A7</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33466"></span>82BA</td>
<td class="instruction">DEFM "PRESS GEAR TO PLA",$D9</td>
<td class="comment-1" rowspan="1">"PRESS GEAR TO PLAY"  (this blinks)</td>
</tr>
<tr>
<td class="asm-label">credits_messages</td>
<td class="address-1"><span id="33484"></span>82CC</td>
<td class="instruction">DEFB $0A</td>
<td class="comment-1" rowspan="1">Frame delay until the following messages start being shown (0 = 256)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33485"></span>82CD</td>
<td class="instruction">DEFB $08</td>
<td class="comment-1" rowspan="1">Frame delay until next message?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33486"></span>82CE</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33487"></span>82CF</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33488"></span>82D0</td>
<td class="instruction">DEFW $F086</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33490"></span>82D2</td>
<td class="instruction">DEFW $5A06</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33492"></span>82D4</td>
<td class="instruction">DEFM "PROGRAM      JOBBEE",$C5</td>
<td class="comment-1" rowspan="1">"PROGRAM      JOBBEEE"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33512"></span>82E8</td>
<td class="instruction">DEFB $08</td>
<td class="comment-1" rowspan="1">Frame delay?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33513"></span>82E9</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33514"></span>82EA</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33515"></span>82EB</td>
<td class="instruction">DEFW $F0A6</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33517"></span>82ED</td>
<td class="instruction">DEFW $5A46</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33519"></span>82EF</td>
<td class="instruction">DEFM "GRAPHICS        BIL",$CC</td>
<td class="comment-1" rowspan="1">"GRAPHICS        BILL"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33539"></span>8303</td>
<td class="instruction">DEFB $28</td>
<td class="comment-1" rowspan="1">Delay + stop flags?  $28</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33540"></span>8304</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33541"></span>8305</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33542"></span>8306</td>
<td class="instruction">DEFW <a href="F0C6.html">noise</a></td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33544"></span>8308</td>
<td class="instruction">DEFW $5A86</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33546"></span>830A</td>
<td class="instruction">DEFM "MUSIC       JON DUN",$CE</td>
<td class="comment-1" rowspan="1">"MUSIC       JON DUNN"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33566"></span>831E</td>
<td class="instruction">DEFB $03</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33567"></span>831F</td>
<td class="instruction">DEFB $00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">copyright_messages</td>
<td class="address-1"><span id="33568"></span>8320</td>
<td class="instruction">DEFB $0A,$08</td>
<td class="comment-1" rowspan="1">(Frame delays as <a href="8258.html#33484">credits_messages</a>)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33570"></span>8322</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33571"></span>8323</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33572"></span>8324</td>
<td class="instruction">DEFW $F084</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33574"></span>8326</td>
<td class="instruction">DEFW $5A04</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33576"></span>8328</td>
<td class="instruction">DEFM "(C) 1989 OCEAN SOFTWAR",$C5</td>
<td class="comment-1" rowspan="1">"(C) 1989 OCEAN SOFTWARE"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33599"></span>833F</td>
<td class="instruction">DEFB $08</td>
<td class="comment-1" rowspan="1">Frame delay?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33600"></span>8340</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33601"></span>8341</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33602"></span>8342</td>
<td class="instruction">DEFW $F0A3</td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33604"></span>8344</td>
<td class="instruction">DEFW $5A43</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33606"></span>8346</td>
<td class="instruction">DEFM "(C) 1988 TAITO CORPORATIO",$CE</td>
<td class="comment-1" rowspan="1">"(C) 1988 TAITO CORPORATION"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33632"></span>8360</td>
<td class="instruction">DEFB $28</td>
<td class="comment-1" rowspan="1">Delay + stop flags?  $28</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33633"></span>8361</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Flags (regular)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33634"></span>8362</td>
<td class="instruction">DEFB $02</td>
<td class="comment-1" rowspan="1">Attribute (red)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33635"></span>8363</td>
<td class="instruction">DEFW <a href="F0C6.html">noise</a></td>
<td class="comment-1" rowspan="1">Back buffer address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33637"></span>8365</td>
<td class="instruction">DEFW $5A86</td>
<td class="comment-1" rowspan="1">Attribute address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33639"></span>8367</td>
<td class="instruction">DEFM "ALL RIGHTS RESERVE",$C4</td>
<td class="comment-1" rowspan="1">"ALL RIGHTS RESERVED"</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33658"></span>837A</td>
<td class="instruction">DEFB $03</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="33659"></span>837B</td>
<td class="instruction">DEFB $00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="8204.html">8204</a>
</td>
<td class="up">Up: <a href="../maps/all.html#33368">Map</a></td>
<td class="next">
Next: <a href="837C.html">837C</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) © 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>