<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at A399</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A27A.html">A27A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#41881">Map</a></td>
<td class="next">
Next: <a href="A579.html">A579</a>
</td>
</tr>
</table>
<div class="description">A399: Checks for collisions.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="8401.html">main_loop</a> and <a href="852A.html">cpu_driver</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">check_collisions</td>
<td class="address-2"><span id="41881"></span>A399</td>
<td class="instruction">LD HL,$0048</td>
<td class="comment-1" rowspan="1">HL = $0048</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41884"></span>A39C</td>
<td class="instruction">LD DE,$01D8</td>
<td class="comment-1" rowspan="1">DE = $01D8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41887"></span>A39F</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41888"></span>A3A0</td>
<td class="instruction">LD A,($A265)</td>
<td class="comment-1" rowspan="1">A = *$A265  -- fairly sure this is a split road flag</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41891"></span>A3A3</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41892"></span>A3A4</td>
<td class="instruction">JR Z,<a href="A399.html#41903">cc_at_split</a></td>
<td class="comment-1" rowspan="1">Jump to cc_at_split if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41894"></span>A3A6</td>
<td class="instruction">LD A,($A266)</td>
<td class="comment-1" rowspan="1">A = *$A266  -- counts down as split approaches</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41897"></span>A3A9</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41898"></span>A3AA</td>
<td class="instruction">JP Z,<a href="A399.html#42230">cc_not_split</a></td>
<td class="comment-1" rowspan="1">Jump to cc_not_split if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41901"></span>A3AD</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41902"></span>A3AE</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if zero  [can't collide immediately before split?]</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="41903"></span>
<div class="comments">
<div class="paragraph">
Check left hand side of car.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">cc_at_split</td>
<td class="address-2"><span id="41903"></span>A3AF</td>
<td class="instruction">LD HL,($EAFE)</td>
<td class="comment-1" rowspan="1">HL = *$EAFE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41906"></span>A3B2</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H  (0 or 255)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41907"></span>A3B3</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41908"></span>A3B4</td>
<td class="instruction">JR NZ,<a href="A399.html#41937">check_collisions_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41910"></span>A3B6</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="5">Jump to $A3D1 if HL &lt; $40</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41911"></span>A3B7</td>
<td class="instruction">LD BC,$0040</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41914"></span>A3BA</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41916"></span>A3BC</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41917"></span>A3BD</td>
<td class="instruction">JR C,<a href="A399.html#41937">check_collisions_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41919"></span>A3BF</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="5">Jump to $A3D5 if HL &lt; $6A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41920"></span>A3C0</td>
<td class="instruction">LD C,$6A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41922"></span>A3C2</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41924"></span>A3C4</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41925"></span>A3C5</td>
<td class="instruction">JR C,<a href="A399.html#41941">check_collisions_1</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41927"></span>A3C7</td>
<td class="instruction">LD C,$85</td>
<td class="comment-1" rowspan="2">HL -= $85</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41929"></span>A3C9</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41931"></span>A3CB</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 1 =&gt; partially off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41932"></span>A3CC</td>
<td class="instruction">JR C,<a href="A399.html#41981">cc_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_split_set if A was 255</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41934"></span>A3CE</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 2 =&gt; fully off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41935"></span>A3CF</td>
<td class="instruction">JR <a href="A399.html#41981">cc_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_split_set</td>
</tr>
<tr>
<td class="asm-label">check_collisions_0</td>
<td class="address-2"><span id="41937"></span>A3D1</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">*$A23D = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41938"></span>A3D2</td>
<td class="instruction">LD ($A23D),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="41941"></span>
<div class="comments">
<div class="paragraph">
Check right hand side of car.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">check_collisions_1</td>
<td class="address-2"><span id="41941"></span>A3D5</td>
<td class="instruction">LD HL,($EAFC)</td>
<td class="comment-1" rowspan="1">HL = *$EAFC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41944"></span>A3D8</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41945"></span>A3D9</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41946"></span>A3DA</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41948"></span>A3DC</td>
<td class="instruction">JR NZ,<a href="A399.html#41978">check_collisions_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41950"></span>A3DE</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="5">Jump to $A3FA if HL &gt;= $BE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41951"></span>A3DF</td>
<td class="instruction">LD BC,$00BE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41954"></span>A3E2</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41956"></span>A3E4</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41957"></span>A3E5</td>
<td class="instruction">JR NC,<a href="A399.html#41978">check_collisions_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41959"></span>A3E7</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="5">Jump to $A3FD if HL &gt;= $8E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41960"></span>A3E8</td>
<td class="instruction">LD BC,$008E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41963"></span>A3EB</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41965"></span>A3ED</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41966"></span>A3EE</td>
<td class="instruction">JR NC,<a href="A399.html#41981">cc_split_set</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41968"></span>A3F0</td>
<td class="instruction">LD C,$7C</td>
<td class="comment-1" rowspan="2">HL -= $7C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41970"></span>A3F2</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41972"></span>A3F4</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 1 =&gt; partially off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41973"></span>A3F5</td>
<td class="instruction">JR NC,<a href="A399.html#41981">cc_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_split_set if no carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41975"></span>A3F7</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 2 =&gt; fully off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41976"></span>A3F8</td>
<td class="instruction">JR <a href="A399.html#41981">cc_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_split_set</td>
</tr>
<tr>
<td class="asm-label">check_collisions_2</td>
<td class="address-2"><span id="41978"></span>A3FA</td>
<td class="instruction">LD ($A23C),A</td>
<td class="comment-1" rowspan="1">*$A23C = A</td>
</tr>
<tr>
<td class="asm-label">cc_split_set</td>
<td class="address-2"><span id="41981"></span>A3FD</td>
<td class="instruction">LD ($A23E),A</td>
<td class="comment-1" rowspan="1">off_road = A  -- 0/1/2 =&gt; on-road/one wheel off-road/both wheels off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41984"></span>A400</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41985"></span>A401</td>
<td class="instruction">LD C,$00</td>
<td class="comment-1" rowspan="1">C = $00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41987"></span>A403</td>
<td class="instruction">JR Z,<a href="A399.html#42043">check_collisions_4</a></td>
<td class="comment-1" rowspan="1">not off road?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41989"></span>A405</td>
<td class="instruction">LD A,($A240)</td>
<td class="comment-1" rowspan="1">Load road_buffer_offset into <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41992"></span>A408</td>
<td class="instruction">ADD A,$40</td>
<td class="comment-1" rowspan="1">Add 64 so it's the lanes data offset</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41994"></span>A40A</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="2">HL = $EE00 | L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41995"></span>A40B</td>
<td class="instruction">LD H,$EE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41997"></span>A40D</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="41998"></span>A40E</td>
<td class="instruction">BIT 6,A</td>
<td class="comment-1" rowspan="1">Test bit 6  -- tunnel bits perhaps?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42000"></span>A410</td>
<td class="instruction">JR Z,<a href="A399.html#42043">check_collisions_4</a></td>
<td class="comment-1" rowspan="1">Jump if clear</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42002"></span>A412</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1">Test bit 7</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42003"></span>A413</td>
<td class="instruction">JR C,<a href="A399.html#42043">check_collisions_4</a></td>
<td class="comment-1" rowspan="1">Jump if set</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42005"></span>A415</td>
<td class="instruction">BIT 3,A</td>
<td class="comment-1" rowspan="1">Test bit 3 (was bit 2 before RLA)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42007"></span>A417</td>
<td class="instruction">LD A,($A26D)</td>
<td class="comment-1" rowspan="1">A = road_pos.hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42010"></span>A41A</td>
<td class="instruction">JR Z,<a href="A399.html#42022">check_collisions_3</a></td>
<td class="comment-1" rowspan="1">Jump if clear</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42012"></span>A41C</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">C = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42013"></span>A41D</td>
<td class="instruction">LD A,$14</td>
<td class="comment-1" rowspan="1">A = 20</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42015"></span>A41F</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42016"></span>A420</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="2">A = C &amp; 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42017"></span>A421</td>
<td class="instruction">AND $01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42019"></span>A423</td>
<td class="instruction">JP <a href="A399.html#42168">check_collisions_8</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">check_collisions_3</td>
<td class="address-2"><span id="42022"></span>A426</td>
<td class="instruction">LD HL,$00D1</td>
<td class="comment-1" rowspan="1">HL = $00D1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42025"></span>A429</td>
<td class="instruction">LD DE,$0195</td>
<td class="comment-1" rowspan="1">DE = $0195</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42028"></span>A42C</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42029"></span>A42D</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42030"></span>A42E</td>
<td class="instruction">LD C,$01</td>
<td class="comment-1" rowspan="1">C = 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42032"></span>A430</td>
<td class="instruction">JR Z,<a href="A399.html#42035">cc_hit_tunnel_wall</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42034"></span>A432</td>
<td class="instruction">INC C</td>
<td class="comment-1" rowspan="1">C++</td>
</tr>
<tr>
<td class="asm-label">cc_hit_tunnel_wall</td>
<td class="address-2"><span id="42035"></span>A433</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42036"></span>A434</td>
<td class="instruction">LD BC,$0604</td>
<td class="comment-1" rowspan="1">BC = $0604</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42039"></span>A437</td>
<td class="instruction">CALL <a href="88F2.html">start_sfx</a></td>
<td class="comment-1" rowspan="1">Call start_sfx</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42042"></span>A43A</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">check_collisions_4</td>
<td class="address-2"><span id="42043"></span>A43B</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1">A = C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42044"></span>A43C</td>
<td class="instruction">LD ($B3DC),A</td>
<td class="comment-1" rowspan="1">($B3DC) = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42047"></span>A43F</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42048"></span>A440</td>
<td class="instruction">LD ($B396),HL</td>
<td class="comment-1" rowspan="1">($B396) = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42051"></span>A443</td>
<td class="instruction">LD ($B3A4),DE</td>
<td class="comment-1" rowspan="1">($B3A4) = DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42055"></span>A447</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42056"></span>A448</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42057"></span>A449</td>
<td class="instruction">LD A,($A240)</td>
<td class="comment-1" rowspan="1">Load road_buffer_offset into <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42060"></span>A44C</td>
<td class="instruction">ADD A,$60</td>
<td class="comment-1" rowspan="1">Add 96 so it's the right side objects data offset</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42062"></span>A44E</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42063"></span>A44F</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42064"></span>A450</td>
<td class="instruction">LD H,$EE</td>
<td class="comment-1" rowspan="1">H = $EE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42066"></span>A452</td>
<td class="instruction">LD A,($A240)</td>
<td class="comment-1" rowspan="1">Load road_buffer_offset into <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42069"></span>A455</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1">Doubling?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42070"></span>A456</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42071"></span>A457</td>
<td class="instruction">JR NC,<a href="A399.html#42074">check_collisions_5</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42073"></span>A459</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">L++</td>
</tr>
<tr>
<td class="asm-label">check_collisions_5</td>
<td class="address-2"><span id="42074"></span>A45A</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1">A |= *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42075"></span>A45B</td>
<td class="instruction">JR Z,<a href="A399.html#42112">check_collisions_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42077"></span>A45D</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="9">HL = $5CFA[A * 7]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42078"></span>A45E</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42079"></span>A45F</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42080"></span>A460</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42081"></span>A461</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42082"></span>A462</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42083"></span>A463</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42085"></span>A465</td>
<td class="instruction">LD HL,($5CFA)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42088"></span>A468</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42089"></span>A469</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="2">C = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42090"></span>A46A</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42091"></span>A46B</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="2">E = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42092"></span>A46C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42093"></span>A46D</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42094"></span>A46E</td>
<td class="instruction">LD D,B</td>
<td class="comment-1" rowspan="1">D = B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42095"></span>A46F</td>
<td class="instruction">LD HL,($EAFC)</td>
<td class="comment-1" rowspan="1">HL = *$EAFC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42098"></span>A472</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42099"></span>A473</td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-1" rowspan="1">HL -= BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42101"></span>A475</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42102"></span>A476</td>
<td class="instruction">JR NC,<a href="A399.html#42112">check_collisions_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42104"></span>A478</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42106"></span>A47A</td>
<td class="instruction">JR C,<a href="A399.html#42112">check_collisions_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42108"></span>A47C</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42109"></span>A47D</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42110"></span>A47E</td>
<td class="instruction">JR <a href="A399.html#42160">cc_hit_scenery</a></td>
<td class="comment-1" rowspan="1">Jump to cc_hit_scenery</td>
</tr>
<tr>
<td class="asm-label">check_collisions_6</td>
<td class="address-2"><span id="42112"></span>A480</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42113"></span>A481</td>
<td class="instruction">ADD A,$20</td>
<td class="comment-1" rowspan="1">A += 32</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42115"></span>A483</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="2">HL = $EE00 | A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42116"></span>A484</td>
<td class="instruction">LD H,$EE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42118"></span>A486</td>
<td class="instruction">LD A,($A240)</td>
<td class="comment-1" rowspan="1">Load road_buffer_offset into <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42121"></span>A489</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1">Doubling?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42122"></span>A48A</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42123"></span>A48B</td>
<td class="instruction">JR NC,<a href="A399.html#42126">check_collisions_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42125"></span>A48D</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">L++</td>
</tr>
<tr>
<td class="asm-label">check_collisions_7</td>
<td class="address-2"><span id="42126"></span>A48E</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1">A |= *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42127"></span>A48F</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42128"></span>A490</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="9">HL = $5D00[A * 7]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42129"></span>A491</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42130"></span>A492</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42131"></span>A493</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42132"></span>A494</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42133"></span>A495</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42134"></span>A496</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42136"></span>A498</td>
<td class="instruction">LD HL,($5D00)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42139"></span>A49B</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42140"></span>A49C</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="2">C = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42141"></span>A49D</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42142"></span>A49E</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="2">E = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42143"></span>A49F</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42144"></span>A4A0</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42145"></span>A4A1</td>
<td class="instruction">LD D,B</td>
<td class="comment-1" rowspan="1">D = B  must be zero?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42146"></span>A4A2</td>
<td class="instruction">LD HL,($EAFE)</td>
<td class="comment-1" rowspan="1">HL = *$EAFE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42149"></span>A4A5</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42150"></span>A4A6</td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-1" rowspan="1">HL -= BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42152"></span>A4A8</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42153"></span>A4A9</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42154"></span>A4AA</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42156"></span>A4AC</td>
<td class="instruction">RET NC</td>
<td class="comment-1" rowspan="1">Return if no carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42157"></span>A4AD</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42158"></span>A4AE</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="1">A = $01</td>
</tr>
<tr>
<td class="asm-label">cc_hit_scenery</td>
<td class="address-2"><span id="42160"></span>A4B0</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42161"></span>A4B1</td>
<td class="instruction">LD BC,$0403</td>
<td class="comment-1" rowspan="1">BC = $0403      -- arrive here if drive into scenery, e.g. a tree</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42164"></span>A4B4</td>
<td class="instruction">CALL <a href="88F2.html">start_sfx</a></td>
<td class="comment-1" rowspan="1">Call start_sfx</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42167"></span>A4B7</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42168"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="A637.html">smash_handler</a> and <a href="A8CD.html">hazard_handler_a8cd</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">check_collisions_8</td>
<td class="address-2"><span id="42168"></span>A4B8</td>
<td class="instruction">LD HL,$B326</td>
<td class="comment-1" rowspan="1">HL = &amp;&lt;crashed flag&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42171"></span>A4BB</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="2">[why inc then dec?]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42172"></span>A4BC</td>
<td class="instruction">DEC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42173"></span>A4BD</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42174"></span>A4BE</td>
<td class="instruction">LD (HL),$01</td>
<td class="comment-1" rowspan="1">Set crashed flag</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42176"></span>A4C0</td>
<td class="instruction">LD ($B36F),A</td>
<td class="comment-1" rowspan="2">*$B36F = A++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42179"></span>A4C3</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42180"></span>A4C4</td>
<td class="instruction">LD ($B38E),A</td>
<td class="comment-1" rowspan="2">*$B38E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42183"></span>A4C7</td>
<td class="instruction">LD A,$05</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42185"></span>A4C9</td>
<td class="instruction">LD ($B385),A</td>
<td class="comment-1" rowspan="1">*$B385 = 5</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42188"></span>A4CC</td>
<td class="instruction">LD HL,($A24A)</td>
<td class="comment-1" rowspan="1">HL = speed</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42191"></span>A4CF</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42192"></span>A4D0</td>
<td class="instruction">SRL H</td>
<td class="comment-1" rowspan="1">H &gt;&gt;= 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42194"></span>A4D2</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1">A = L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42195"></span>A4D3</td>
<td class="instruction">RR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42197"></span>A4D5</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="4">A = (A &lt;&lt; 3) + 16</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42199"></span>A4D7</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42201"></span>A4D9</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42203"></span>A4DB</td>
<td class="instruction">ADD A,$10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42205"></span>A4DD</td>
<td class="instruction">LD L,$18</td>
<td class="comment-1" rowspan="1">L = 24</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42207"></span>A4DF</td>
<td class="instruction">CP L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42208"></span>A4E0</td>
<td class="instruction">JR C,<a href="A399.html#42211">check_collisions_9</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42210"></span>A4E2</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label">check_collisions_9</td>
<td class="address-2"><span id="42211"></span>A4E3</td>
<td class="instruction">LD ($B357),HL</td>
<td class="comment-1" rowspan="1">*$B357 = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42214"></span>A4E6</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42215"></span>A4E7</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="2">HL = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42216"></span>A4E8</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42218"></span>A4EA</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42219"></span>A4EB</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42220"></span>A4EC</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42222"></span>A4EE</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42223"></span>A4EF</td>
<td class="instruction">JR C,<a href="A399.html#42226">check_collisions_10</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42225"></span>A4F1</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">check_collisions_10</td>
<td class="address-2"><span id="42226"></span>A4F2</td>
<td class="instruction">LD ($B32F),HL</td>
<td class="comment-1" rowspan="1">Self modify 'LD BC' at $B32E to load HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42229"></span>A4F5</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">cc_not_split</td>
<td class="address-2"><span id="42230"></span>A4F6</td>
<td class="instruction">LD HL,($E8FE)</td>
<td class="comment-1" rowspan="1">HL = *$E8FE  [mystery var]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42233"></span>A4F9</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H  (0 or 255)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42234"></span>A4FA</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42235"></span>A4FB</td>
<td class="instruction">JR NZ,<a href="A399.html#42256">check_collisions_11</a></td>
<td class="comment-1" rowspan="1">A isn't zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42237"></span>A4FD</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="6">Jump to $A510 if HL &lt; $6A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42238"></span>A4FE</td>
<td class="instruction">LD BC,$006A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42241"></span>A501</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42243"></span>A503</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42244"></span>A504</td>
<td class="instruction">JR C,<a href="A399.html#42256">check_collisions_11</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42246"></span>A506</td>
<td class="instruction">LD C,$85</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42248"></span>A508</td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-1" rowspan="1">HL -= $85</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42250"></span>A50A</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 1 =&gt; partially off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42251"></span>A50B</td>
<td class="instruction">JR C,<a href="A399.html#42282">cc_not_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_not_split_set if HL &lt; $85</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42253"></span>A50D</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 2 =&gt; fully off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42254"></span>A50E</td>
<td class="instruction">JR <a href="A399.html#42282">cc_not_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_not_split_set</td>
</tr>
<tr>
<td class="asm-label">check_collisions_11</td>
<td class="address-2"><span id="42256"></span>A510</td>
<td class="instruction">LD HL,($EDFC)</td>
<td class="comment-1" rowspan="1">HL = *$EDFC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42259"></span>A513</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42260"></span>A514</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42261"></span>A515</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42263"></span>A517</td>
<td class="instruction">JR NZ,<a href="A399.html#42282">cc_not_split_set</a></td>
<td class="comment-1" rowspan="1">JR NZ,cc_not_split_set</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42265"></span>A519</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="5">Jump to cc_not_split_set if HL &gt;= $8E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42266"></span>A51A</td>
<td class="instruction">LD BC,$008E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42269"></span>A51D</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42271"></span>A51F</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42272"></span>A520</td>
<td class="instruction">JR NC,<a href="A399.html#42282">cc_not_split_set</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42274"></span>A522</td>
<td class="instruction">LD C,$7C</td>
<td class="comment-1" rowspan="2">HL -= $7C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42276"></span>A524</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42278"></span>A526</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 1 =&gt; partially off-road</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42279"></span>A527</td>
<td class="instruction">JR NC,<a href="A399.html#42282">cc_not_split_set</a></td>
<td class="comment-1" rowspan="1">Jump to cc_not_split_set if HL &gt;= $7C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42281"></span>A529</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++  -- A == 2 =&gt; fully off-road</td>
</tr>
<tr>
<td class="asm-label">cc_not_split_set</td>
<td class="address-2"><span id="42282"></span>A52A</td>
<td class="instruction">LD ($A23E),A</td>
<td class="comment-1" rowspan="1">off_road = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42285"></span>A52D</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42286"></span>A52E</td>
<td class="instruction">LD ($B3DC),A</td>
<td class="comment-1" rowspan="1">*$B3DC = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42289"></span>A531</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42290"></span>A532</td>
<td class="instruction">LD ($B396),HL</td>
<td class="comment-1" rowspan="1">*$B396 = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42293"></span>A535</td>
<td class="instruction">LD ($B3A4),DE</td>
<td class="comment-1" rowspan="1">*$B3A4 = DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42297"></span>A539</td>
<td class="instruction">LD A,($A249)</td>
<td class="comment-1" rowspan="3">Jump to $A55C if the right fork was taken</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42300"></span>A53C</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42301"></span>A53D</td>
<td class="instruction">JR NZ,<a href="A399.html#42332">check_collisions_12</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42303"></span>A53F</td>
<td class="instruction">LD HL,($5CFC)</td>
<td class="comment-1" rowspan="1">HL = *$5CFC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42306"></span>A542</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="2">C = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42307"></span>A543</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42308"></span>A544</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="2">E = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42309"></span>A545</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42310"></span>A546</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42311"></span>A547</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1">B = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42313"></span>A549</td>
<td class="instruction">LD D,B</td>
<td class="comment-1" rowspan="1">D = B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42314"></span>A54A</td>
<td class="instruction">LD HL,($EAFE)</td>
<td class="comment-1" rowspan="1">HL = *$EAFE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42317"></span>A54D</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="4">Return if HL &gt;= BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42318"></span>A54E</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42320"></span>A550</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42321"></span>A551</td>
<td class="instruction">RET NC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42322"></span>A552</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="2">Return if HL &lt; DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42324"></span>A554</td>
<td class="instruction">RET C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42325"></span>A555</td>
<td class="instruction">LD A,$8C</td>
<td class="comment-1" rowspan="1">A = $8C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42327"></span>A557</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42328"></span>A558</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42329"></span>A559</td>
<td class="instruction">JP <a href="A399.html#42160">cc_hit_scenery</a></td>
<td class="comment-1" rowspan="1">Jump to cc_hit_scenery</td>
</tr>
<tr>
<td class="asm-label">check_collisions_12</td>
<td class="address-2"><span id="42332"></span>A55C</td>
<td class="instruction">LD HL,($5D02)</td>
<td class="comment-1" rowspan="1">HL = *$5D02</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42335"></span>A55F</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="2">C = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42336"></span>A560</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42337"></span>A561</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="2">E = *HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42338"></span>A562</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42339"></span>A563</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1">B = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42341"></span>A565</td>
<td class="instruction">LD D,B</td>
<td class="comment-1" rowspan="1">D = B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42342"></span>A566</td>
<td class="instruction">LD HL,($EAFC)</td>
<td class="comment-1" rowspan="1">HL = *$EAFC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42345"></span>A569</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="4">Return if HL &lt; BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42346"></span>A56A</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42348"></span>A56C</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42349"></span>A56D</td>
<td class="instruction">RET C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42350"></span>A56E</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="2">Return if HL &gt;= DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42352"></span>A570</td>
<td class="instruction">RET NC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42353"></span>A571</td>
<td class="instruction">LD A,$8C</td>
<td class="comment-1" rowspan="1">A = $8C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42355"></span>A573</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42356"></span>A574</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="1">A = 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="42358"></span>A576</td>
<td class="instruction">JP <a href="A399.html#42160">cc_hit_scenery</a></td>
<td class="comment-1" rowspan="1">Jump to cc_hit_scenery</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A27A.html">A27A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#41881">Map</a></td>
<td class="next">
Next: <a href="A579.html">A579</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20230518</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.)  2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>