<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 9278</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="924D.html">924D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#37496">Map</a></td>
<td class="next">
Next: <a href="92E1.html">92E1</a>
</td>
</tr>
</table>
<div class="description">9278: Draws objects (left hand version).</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Called via dispatch at <a href="8F5F.html#36891">901B</a>.
</div>
<div class="paragraph">
Used to draw turn signs, tunnel lights, ... what else?
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">B</td>
<td class="register-desc">?</td>
</tr>
<tr>
<td class="register">IX</td>
<td class="register-desc">?</td>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">Address of arg, e.g. $6B0C</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">draw_object_left</td>
<td class="address-2"><span id="37496"></span>9278</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37497"></span>9279</td>
<td class="instruction">LD ($933E),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD D,x' @ <a href="92E1.html#37693">draw_object_right_8</a> to load <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37500"></span>927C</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="4">A = min(B,10)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37501"></span>927D</td>
<td class="instruction">CP $0A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37503"></span>927F</td>
<td class="instruction">JR C,<a href="9278.html#37507">draw_object_left_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37505"></span>9281</td>
<td class="instruction">LD A,$0A</td>
</tr>
<tr>
<td class="asm-label">draw_object_left_0</td>
<td class="address-2"><span id="37507"></span>9283</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Put arg address in HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37508"></span>9284</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="3">DE = wordat(HL); HL++   -- loads address of turn_sign_lods</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37509"></span>9285</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37510"></span>9286</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37511"></span>9287</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="5">HL += A * 2 - 1   -- index the table</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37512"></span>9288</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37513"></span>9289</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37514"></span>928A</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37516"></span>928C</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37517"></span>928D</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="2">B = *HL++   -- this reads <a href="643E.html#27384">6AF8</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37518"></span>928E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37519"></span>928F</td>
<td class="instruction">LD L,(HL)</td>
<td class="comment-1" rowspan="3">HL = *HL + DE   -- read as byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37520"></span>9290</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37522"></span>9292</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37523"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="916C.html">draw_stretchy_object_left</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_object_left_stretchy_entrypt</td>
<td class="address-2"><span id="37523"></span>9293</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="3">A = IX[0] + 16 - B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37526"></span>9296</td>
<td class="instruction">ADD A,$10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37528"></span>9298</td>
<td class="instruction">SUB B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37529"></span>9299</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if carry (if IX[0] + 16 &lt; B)</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37530"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="A9DE.html">sub_A9DE</a>, <a href="AA38.html">helicopter_stuff</a> and <a href="ADA0.html">draw_hazards</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_object_left_1</td>
<td class="address-2"><span id="37530"></span>929A</td>
<td class="instruction">CP $08</td>
<td class="comment-1" rowspan="2">Return if A &lt; 8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37532"></span>929C</td>
<td class="instruction">RET C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37533"></span>929D</td>
<td class="instruction">LD C,$00</td>
<td class="comment-1" rowspan="1">C = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37535"></span>929F</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1">E = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37536"></span>92A0</td>
<td class="instruction">RLC E</td>
<td class="comment-1" rowspan="3">likely E &lt;&lt; 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37538"></span>92A2</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37540"></span>92A4</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37542"></span>92A6</td>
<td class="instruction">SUB E</td>
<td class="comment-1" rowspan="1">A -= E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37543"></span>92A7</td>
<td class="instruction">JR C,<a href="9278.html#37563">draw_object_left_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37545"></span>92A9</td>
<td class="instruction">CP $08</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37547"></span>92AB</td>
<td class="instruction">JR NC,<a href="92E1.html#37646">draw_object_right_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37549"></span>92AD</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1">E = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37550"></span>92AE</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37551"></span>92AF</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37552"></span>92B0</td>
<td class="instruction">LD ($9396),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' at $9395 to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37555"></span>92B3</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="2">A = E - 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37556"></span>92B4</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37557"></span>92B5</td>
<td class="instruction">LD BC,$0101</td>
<td class="comment-1" rowspan="1">BC = $0101</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37560"></span>92B8</td>
<td class="instruction">JP <a href="9278.html#37586">draw_object_left_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_object_left_2</td>
<td class="address-2"><span id="37563"></span>92BB</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1">E = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37564"></span>92BC</td>
<td class="instruction">AND $FC</td>
<td class="comment-1" rowspan="1">A &amp;= $FC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37566"></span>92BE</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37567"></span>92BF</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37568"></span>92C0</td>
<td class="instruction">LD ($9396),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' at $9395 to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37571"></span>92C3</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37572"></span>92C4</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">B = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37573"></span>92C5</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="2">A += E - 33</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37574"></span>92C6</td>
<td class="instruction">SUB $21</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37576"></span>92C8</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="2">Return if carry or zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37577"></span>92C9</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37578"></span>92CA</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1">D = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37579"></span>92CB</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="3">C = E - A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37581"></span>92CD</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37582"></span>92CE</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37583"></span>92CF</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1">A = D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37584"></span>92D0</td>
<td class="instruction">LD B,$01</td>
<td class="comment-1" rowspan="1">B = 1</td>
</tr>
<tr>
<td class="asm-label">draw_object_left_3</td>
<td class="address-2"><span id="37586"></span>92D2</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37587"></span>92D3</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="2">D = *HL &gt;&gt; 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37588"></span>92D4</td>
<td class="instruction">SRL D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37590"></span>92D6</td>
<td class="instruction">JP Z,<a href="92E1.html#37683">draw_object_right_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37593"></span>92D9</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">B--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37594"></span>92DA</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37595"></span>92DB</td>
<td class="instruction">LD C,$00</td>
<td class="comment-1" rowspan="1">C = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37597"></span>92DD</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37598"></span>92DE</td>
<td class="instruction">JP <a href="92E1.html#37675">draw_object_common</a></td>
<td class="comment-1" rowspan="1">Exit via draw_object_common</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="924D.html">924D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#37496">Map</a></td>
<td class="next">
Next: <a href="92E1.html">92E1</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) © 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>