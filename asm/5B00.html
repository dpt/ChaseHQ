<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 5B00</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="4000.html">4000</a>
</td>
<td class="up">Up: <a href="../maps/all.html#23296">Map</a></td>
<td class="next">
Next: <a href="5BD7.html">5BD7</a>
</td>
</tr>
</table>
<div class="description">5B00: The game has loaded</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
The game starts here.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">start</td>
<td class="address-2"><span id="23296"></span>5B00</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23297"></span>5B01</td>
<td class="instruction">LD SP,$5C00</td>
<td class="comment-1" rowspan="1">Set stack pointer</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23300"></span>
<div class="comments">
<div class="paragraph">
Copy $4910 bytes from $5C00+ to $76F0+ (copying backwards to avoid overlap).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23300"></span>5B04</td>
<td class="instruction">LD HL,$A50F</td>
<td class="comment-1" rowspan="1">Final source byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23303"></span>5B07</td>
<td class="instruction">LD DE,$BFFF</td>
<td class="comment-1" rowspan="1">Final destination byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23306"></span>5B0A</td>
<td class="instruction">LD BC,$4910</td>
<td class="comment-1" rowspan="1">Count</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23309"></span>5B0D</td>
<td class="instruction">LDDR</td>
<td class="comment-1" rowspan="1">Copy</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23311"></span>
<div class="comments">
<div class="paragraph">
Detect 128K machines.
</div>
<div class="paragraph">
Assuming bank 0 is mapped in to start with, we copy a byte from bank 0.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23311"></span>5B0F</td>
<td class="instruction">LD HL,$FFF0</td>
<td class="comment-1" rowspan="2">Read the byte at $FFF0 into <span class="register">E</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23314"></span>5B12</td>
<td class="instruction">LD E,(HL)</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23315"></span>
<div class="comments">
<div class="paragraph">
Now we modify it, then store it back after attempting to page in bank 1.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23315"></span>5B13</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="3">Attempt to map RAM bank 1 to $C000</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23317"></span>5B15</td>
<td class="instruction">LD BC,$7FFD</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23320"></span>5B18</td>
<td class="instruction">OUT (C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23322"></span>5B1A</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="2">Increment the read byte by $FD (being a handy non-zero value)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23323"></span>5B1B</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23324"></span>5B1C</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Store it</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23325"></span>
<div class="comments">
<div class="paragraph">
If the modified byte remains present after restoring bank 0 then it's a 48K machine.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23325"></span>5B1D</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Attempt to map RAM bank 0 to $C000</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23326"></span>5B1E</td>
<td class="instruction">OUT (C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23328"></span>5B20</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">Fetch potentially changed byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23329"></span>5B21</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-1" rowspan="1">Restore original byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23330"></span>5B22</td>
<td class="instruction">LD HL,$5B7D</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at loader_commands_48K</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23333"></span>
<div class="comments">
<div class="paragraph">
If byte was modified no paging took place, so this is a 48K machine.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23333"></span>5B25</td>
<td class="instruction">CP E</td>
<td class="comment-1" rowspan="2">If modified, jump to loader with loader_commands_48K setup</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23334"></span>5B26</td>
<td class="instruction">JR NZ,<a href="5B00.html#23339">loader</a></td>
</tr>
<tr>
<td class="asm-label">mode_is_128k</td>
<td class="address-1"><span id="23336"></span>5B28</td>
<td class="instruction">LD HL,$5B87</td>
<td class="comment-1" rowspan="1">Otherwise point <span class="register">HL</span> at loader_commands_128K</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23339"></span>
<div class="comments">
<div class="paragraph">
Loader accepts a command list and uses it to load the game into memory. The 48K command list at <a href="5B00.html#23421">loader_commands_48K</a> loads stage 1, then starts the game. The 128K command list at <a href="5B00.html#23431">loader_commands_128K</a> loads stages while paging in the appropriate banks, then starts the game.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader</td>
<td class="address-2"><span id="23339"></span>5B2B</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="4">Load a handler address from <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23340"></span>5B2C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23341"></span>5B2D</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23342"></span>5B2E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23343"></span>5B2F</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="2">Call the handler</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23344"></span>5B30</td>
<td class="instruction">RET</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23345"></span>
<div class="comments">
<div class="paragraph">
Loader handler that loads a stage.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_load</td>
<td class="address-1"><span id="23345"></span>5B31</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve command list address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23346"></span>5B32</td>
<td class="instruction">LD IX,$5BD5</td>
<td class="comment-1" rowspan="1">Address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23350"></span>5B36</td>
<td class="instruction">LD DE,$0002</td>
<td class="comment-1" rowspan="1">Count</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23353"></span>5B39</td>
<td class="instruction">CALL <a href="5B00.html#23375">loader_load_chunk</a></td>
<td class="comment-1" rowspan="1">Call loader_load_chunk</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23356"></span>5B3C</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore command list address</td>
</tr>
<tr>
<td class="asm-label">loader_load_headerless</td>
<td class="address-1"><span id="23357"></span>5B3D</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="6">Load address into <span class="register">IX</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23358"></span>5B3E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23359"></span>5B3F</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23360"></span>5B40</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23361"></span>5B41</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23362"></span>5B42</td>
<td class="instruction">POP IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23364"></span>5B44</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="4">Load count into <span class="register">DE</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23365"></span>5B45</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23366"></span>5B46</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23367"></span>5B47</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23368"></span>5B48</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve command list address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23369"></span>5B49</td>
<td class="instruction">CALL <a href="5B00.html#23375">loader_load_chunk</a></td>
<td class="comment-1" rowspan="1">Call loader_load_chunk</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23372"></span>5B4C</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore command list address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23373"></span>5B4D</td>
<td class="instruction">JR <a href="5B00.html#23339">loader</a></td>
<td class="comment-1" rowspan="1">Process next entry</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23375"></span>
<div class="comments">
<div class="paragraph">
Subroutine that loads <span class="register">DE</span> bytes to address <span class="register">IX</span>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_load_chunk</td>
<td class="address-2"><span id="23375"></span>5B4F</td>
<td class="instruction">CALL <a href="80B9.html#32960">tape_load</a></td>
<td class="comment-1" rowspan="1">Call tape_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23378"></span>5B52</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if no errors</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23379"></span>
<div class="comments">
<div class="paragraph">
Infinitely cycle through border colours if a tape loading error occurred.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_load_failed</td>
<td class="address-2"><span id="23379"></span>5B53</td>
<td class="instruction">OUT ($FE),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23381"></span>5B55</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23382"></span>5B56</td>
<td class="instruction">JR <a href="5B00.html#23379">loader_load_failed</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23384"></span>
<div class="comments">
<div class="paragraph">
Loader handler that pages in the specified RAM bank.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_set_bank</td>
<td class="address-1"><span id="23384"></span>5B58</td>
<td class="instruction">LD A,$80</td>
<td class="comment-1" rowspan="1">Page in RAM where interrupt vector lives</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23386"></span>5B5A</td>
<td class="instruction">LD I,A</td>
<td class="comment-1" rowspan="1">Set Interrupt Control Vector Register</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23388"></span>5B5C</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">Load 128K paging flags byte</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23389"></span>5B5D</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Second byte is unused</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23390"></span>5B5E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23391"></span>5B5F</td>
<td class="instruction">LD BC,$7FFD</td>
<td class="comment-1" rowspan="2">128K: Set paging register</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23394"></span>5B62</td>
<td class="instruction">OUT (C),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23396"></span>5B64</td>
<td class="instruction">JR <a href="5B00.html#23339">loader</a></td>
<td class="comment-1" rowspan="1">Process next entry</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23398"></span>
<div class="comments">
<div class="paragraph">
Loader handler that copies data around.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_copy</td>
<td class="address-1"><span id="23398"></span>5B66</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Preserve command list address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23399"></span>5B67</td>
<td class="instruction">LD HL,$5C00</td>
<td class="comment-1" rowspan="4">Move $5C00..$76EF to $C000 onwards</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23402"></span>5B6A</td>
<td class="instruction">LD DE,$C000</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23405"></span>5B6D</td>
<td class="instruction">LD BC,$1AF0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23408"></span>5B70</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23410"></span>5B72</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore command list address</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23411"></span>5B73</td>
<td class="instruction">JR <a href="5B00.html#23339">loader</a></td>
<td class="comment-1" rowspan="1">Process next entry</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23413"></span>
<div class="comments">
<div class="paragraph">
Loader handler that starts the game.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_done</td>
<td class="address-1"><span id="23413"></span>5B75</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="4">Load entrypoint address from <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23414"></span>5B76</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23415"></span>5B77</td>
<td class="instruction">LD H,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23416"></span>5B78</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23417"></span>5B79</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Set border to black</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23418"></span>5B7A</td>
<td class="instruction">OUT ($FE),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23420"></span>5B7C</td>
<td class="instruction">JP (HL)</td>
<td class="comment-1" rowspan="1">Exit via entrypoint just read</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23421"></span>
<div class="comments">
<div class="paragraph">
Loader commands for 48K mode.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_commands_48K</td>
<td class="address-1"><span id="23421"></span>5B7D</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23423"></span>5B7F</td>
<td class="instruction">DEFW <a href="5C00.html">bitmap_horizon</a>,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 1: at $5C00 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23427"></span>5B83</td>
<td class="instruction">DEFW <a href="5B00.html#23413">loader_done</a></td>
<td class="comment-1" rowspan="1">loader_done</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23429"></span>5B85</td>
<td class="instruction">DEFW <a href="E810.html">entrypt_48k</a></td>
<td class="comment-1" rowspan="1">entrypt_48k</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="23431"></span>
<div class="comments">
<div class="paragraph">
Loader commands for 128K mode.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">loader_commands_128K</td>
<td class="address-1"><span id="23431"></span>5B87</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23433"></span>5B89</td>
<td class="instruction">DEFW <a href="5C00.html">bitmap_horizon</a>,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 1: at $5C00 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23437"></span>5B8D</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23439"></span>5B8F</td>
<td class="instruction">DEFB $01,$00</td>
<td class="comment-1" rowspan="1">Bank 1 (second byte is unused here)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23441"></span>5B91</td>
<td class="instruction">DEFW <a href="5B00.html#23398">loader_copy</a></td>
<td class="comment-1" rowspan="1">loader_copy</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23443"></span>5B93</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23445"></span>5B95</td>
<td class="instruction">DEFW $E000,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 2: at $E000 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23449"></span>5B99</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23451"></span>5B9B</td>
<td class="instruction">DEFB $06,$00</td>
<td class="comment-1" rowspan="1">Bank 6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23453"></span>5B9D</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23455"></span>5B9F</td>
<td class="instruction">DEFW $C000,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 3: at $C000 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23459"></span>5BA3</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23461"></span>5BA5</td>
<td class="instruction">DEFW $E000,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 4: at $E000 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23465"></span>5BA9</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23467"></span>5BAB</td>
<td class="instruction">DEFB $07,$00</td>
<td class="comment-1" rowspan="1">Bank 7</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23469"></span>5BAD</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23471"></span>5BAF</td>
<td class="instruction">DEFW $C000,$1AF0</td>
<td class="comment-1" rowspan="1">Stage 5: at $C000 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23475"></span>5BB3</td>
<td class="instruction">DEFW <a href="5B00.html#23345">loader_load</a></td>
<td class="comment-1" rowspan="1">loader_load</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23477"></span>5BB5</td>
<td class="instruction">DEFW $E000,$1AF0</td>
<td class="comment-1" rowspan="1">End screen: at $E000 load $1AF0 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23481"></span>5BB9</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23483"></span>5BBB</td>
<td class="instruction">DEFB $03,$00</td>
<td class="comment-1" rowspan="1">Bank 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23485"></span>5BBD</td>
<td class="instruction">DEFW <a href="5B00.html#23357">loader_load_headerless</a></td>
<td class="comment-1" rowspan="1">loader_load_headerless</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23487"></span>5BBF</td>
<td class="instruction">DEFW $C000,$4000</td>
<td class="comment-1" rowspan="1">Title screen: at $C000 load $4000 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23491"></span>5BC3</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23493"></span>5BC5</td>
<td class="instruction">DEFB $04,$00</td>
<td class="comment-1" rowspan="1">Bank 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23495"></span>5BC7</td>
<td class="instruction">DEFW <a href="5B00.html#23357">loader_load_headerless</a></td>
<td class="comment-1" rowspan="1">loader_load_headerless</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23497"></span>5BC9</td>
<td class="instruction">DEFW $C000,$4000</td>
<td class="comment-1" rowspan="1">Sampled speech: at $C000 load $4000 bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23501"></span>5BCD</td>
<td class="instruction">DEFW <a href="5B00.html#23384">loader_set_bank</a></td>
<td class="comment-1" rowspan="1">loader_set_bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23503"></span>5BCF</td>
<td class="instruction">DEFB $00,$00</td>
<td class="comment-1" rowspan="1">Bank 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23505"></span>5BD1</td>
<td class="instruction">DEFW <a href="5B00.html#23413">loader_done</a></td>
<td class="comment-1" rowspan="1">loader_done</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="23507"></span>5BD3</td>
<td class="instruction">DEFW <a href="E810.html#59414">entrypt_128k</a></td>
<td class="comment-1" rowspan="1">entrypt_128k</td>
</tr>
<tr>
<td class="asm-label">loader_scratch</td>
<td class="address-1"><span id="23509"></span>5BD5</td>
<td class="instruction">DEFB $01,$01</td>
<td class="comment-1" rowspan="1"><a href="5B00.html#23345">loader_load</a> loads two bytes to here.  -- unsure what uses them</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="4000.html">4000</a>
</td>
<td class="up">Up: <a href="../maps/all.html#23296">Map</a></td>
<td class="next">
Next: <a href="5BD7.html">5BD7</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) © 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>