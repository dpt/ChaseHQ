<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at ADA0</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AD51.html">AD51</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44448">Map</a></td>
<td class="next">
Next: <a href="B045.html">B045</a>
</td>
</tr>
</table>
<div class="description">ADA0: Draws all hazards</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This includes all cars, barriers, tumbleweeds, etc.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">Used</td>
<td class="register-desc">by the routines at <a href="8401.html">main_loop</a>, <a href="852A.html">cpu_driver</a> and <a href="873C.html">escape_scene</a>.</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">draw_hazards</td>
<td class="address-2"><span id="44448"></span>ADA0</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">var_a222 = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44449"></span>ADA1</td>
<td class="instruction">LD ($A222),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44452"></span>ADA4</td>
<td class="instruction">LD IYh,$E3</td>
<td class="comment-1" rowspan="1">IY = $E3xx</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44455"></span>ADA7</td>
<td class="instruction">LD IX,$A188</td>
<td class="comment-1" rowspan="1">IX = &amp;hazards[0]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44459"></span>ADAB</td>
<td class="instruction">LD DE,$0014</td>
<td class="comment-1" rowspan="1">Stride of hazards entry in bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44462"></span>ADAE</td>
<td class="instruction">LD B,$06</td>
<td class="comment-1" rowspan="1">6 iterations</td>
</tr>
<tr>
<td class="asm-label">dh_loop</td>
<td class="address-2"><span id="44464"></span>ADB0</td>
<td class="instruction">RLC (IX+$00)</td>
<td class="comment-1" rowspan="1">Set carry if the hazard is active</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44468"></span>ADB4</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44469"></span>ADB5</td>
<td class="instruction">CALL C,<a href="ADA0.html#44478">dh_draw_one_hazard</a></td>
<td class="comment-1" rowspan="1">Call dh_draw_one_hazard if hazard active</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44472"></span>ADB8</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Unbank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44473"></span>ADB9</td>
<td class="instruction">ADD IX,DE</td>
<td class="comment-1" rowspan="1">Advance to next hazard</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44475"></span>ADBB</td>
<td class="instruction">DJNZ <a href="ADA0.html#44464">dh_loop</a></td>
<td class="comment-1" rowspan="1">Loop while iterations remain -- <span class="register">B</span> &gt; 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44477"></span>ADBD</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">dh_draw_one_hazard</td>
<td class="address-2"><span id="44478"></span>ADBE</td>
<td class="instruction">LD C,(IX+$0E)</td>
<td class="comment-1" rowspan="1">C = IX[14]  -- top byte of horz position?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44481"></span>ADC1</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="3">IX[4] -= IX[13]  -- (TBD -= (bottom byte of horz position?))</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44484"></span>ADC4</td>
<td class="instruction">SUB (IX+$0D)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44487"></span>ADC7</td>
<td class="instruction">LD (IX+$04),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44490"></span>ADCA</td>
<td class="instruction">JR NC,<a href="ADA0.html#44493">draw_hazards_0</a></td>
<td class="comment-1" rowspan="2">If IX[4] was &lt; IX[13] Then C++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44492"></span>ADCC</td>
<td class="instruction">INC C</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_0</td>
<td class="address-2"><span id="44493"></span>ADCD</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="3">C += IX[1]  -- distance related?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44496"></span>ADD0</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44497"></span>ADD1</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44498"></span>ADD2</td>
<td class="instruction">LD A,(IX+$0F)</td>
<td class="comment-1" rowspan="2">A = IX[15] + 1  -- counter?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44501"></span>ADD5</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44502"></span>ADD6</td>
<td class="instruction">JR NZ,<a href="ADA0.html#44528">dh_adf0</a></td>
<td class="comment-1" rowspan="1">Jump to dh_adf0 if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44504"></span>ADD8</td>
<td class="instruction">LD A,(IX+$11)</td>
<td class="comment-1" rowspan="1">A = IX[17]  -- byte that indexes <a href="AC3C.html#44251">table_acdb</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44507"></span>ADDB</td>
<td class="instruction">JR NC,<a href="ADA0.html#44520">draw_hazards_2</a></td>
<td class="comment-1" rowspan="1">Jump if no carry (from earlier)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44509"></span>ADDD</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="3">Jump if ++A &lt; 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44510"></span>ADDE</td>
<td class="instruction">CP $04</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44512"></span>ADE0</td>
<td class="instruction">JR C,<a href="ADA0.html#44517">draw_hazards_1</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44514"></span>ADE2</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44515"></span>ADE3</td>
<td class="instruction">LD C,$FF</td>
<td class="comment-1" rowspan="1">C = $FF  -- gets put in distance related field</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_1</td>
<td class="address-2"><span id="44517"></span>ADE5</td>
<td class="instruction">LD (IX+$11),A</td>
<td class="comment-1" rowspan="1">IX[17] = A</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_2</td>
<td class="address-2"><span id="44520"></span>ADE8</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44521"></span>ADE9</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1">A = C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44522"></span>ADEA</td>
<td class="instruction">JR Z,<a href="ADA0.html#44538">draw_hazards_3</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44524"></span>ADEC</td>
<td class="instruction">LD (IX+$01),A</td>
<td class="comment-1" rowspan="1">IX[1] = A  -- update distance?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44527"></span>ADEF</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">dh_adf0</td>
<td class="address-2"><span id="44528"></span>ADF0</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1">A = C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44529"></span>ADF1</td>
<td class="instruction">CP $17</td>
<td class="comment-1" rowspan="2">Jump if A &lt; 23  -- still visible?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44531"></span>ADF3</td>
<td class="instruction">JR C,<a href="ADA0.html#44538">draw_hazards_3</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44533"></span>
<div class="comments">
<div class="paragraph">
Wipe the hazard because it's gone?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44533"></span>ADF5</td>
<td class="instruction">LD (IX+$00),$00</td>
<td class="comment-1" rowspan="1">IX[0] = 0  -- hazard slot now spare</td>
</tr>
<tr>
<td class="asm-label">just_ret</td>
<td class="address-1"><span id="44537"></span>ADF9</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_3</td>
<td class="address-2"><span id="44538"></span>ADFA</td>
<td class="instruction">LD (IX+$01),A</td>
<td class="comment-1" rowspan="1">IX[1] = A  -- distance related</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44541"></span>ADFD</td>
<td class="instruction">CP $14</td>
<td class="comment-1" rowspan="2">Return if A &gt;= 20</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44543"></span>ADFF</td>
<td class="instruction">RET NC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44544"></span>AE00</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44545"></span>AE01</td>
<td class="instruction">JR NZ,<a href="ADA0.html#44580">draw_hazards_6</a></td>
<td class="comment-1" rowspan="1">Jump if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44547"></span>AE03</td>
<td class="instruction">LD A,($A23F)</td>
<td class="comment-1" rowspan="3">A = ~(fast_counter &amp; $E0)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44550"></span>AE06</td>
<td class="instruction">AND $E0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44552"></span>AE08</td>
<td class="instruction">CPL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44553"></span>AE09</td>
<td class="instruction">CP (IX+$04)</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= IX[4]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44556"></span>AE0C</td>
<td class="instruction">JR NC,<a href="ADA0.html#44579">draw_hazards_5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44558"></span>AE0E</td>
<td class="instruction">LD B,(IX+$0F)</td>
<td class="comment-1" rowspan="2">B = IX[15] + 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44561"></span>AE11</td>
<td class="instruction">INC B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44562"></span>AE12</td>
<td class="instruction">JR Z,<a href="ADA0.html#44576">draw_hazards_4</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44564"></span>
<div class="comments">
<div class="paragraph">
Wipe the hazard because car overtaken?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44564"></span>AE14</td>
<td class="instruction">LD (IX+$00),$00</td>
<td class="comment-1" rowspan="1">IX[0] = 0  -- hazard slot now spare</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44568"></span>AE18</td>
<td class="instruction">RL B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44570"></span>AE1A</td>
<td class="instruction">RET NC</td>
<td class="comment-1" rowspan="1">Return if no carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44571"></span>AE1B</td>
<td class="instruction">LD HL,$A22B</td>
<td class="comment-1" rowspan="2">Increment allow_overtake_bonus</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44574"></span>AE1E</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44575"></span>AE1F</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_4</td>
<td class="address-2"><span id="44576"></span>AE20</td>
<td class="instruction">LD (IX+$04),A</td>
<td class="comment-1" rowspan="1">IX[4] = A</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_5</td>
<td class="address-2"><span id="44579"></span>AE23</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">A = 0</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_6</td>
<td class="address-2"><span id="44580"></span>AE24</td>
<td class="instruction">ADD A,$4E</td>
<td class="comment-1" rowspan="1">A += $4E</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44582"></span>
<div class="comments">
<div class="paragraph">
$E300..$E316 is regularly accessed. $E300 is always $60, $E316 is always $A0
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44582"></span>AE26</td>
<td class="instruction">LD IYl,A</td>
<td class="comment-1" rowspan="1">IY.low = A  -- i.e. $E300 | A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44584"></span>AE28</td>
<td class="instruction">LD A,(IY+$01)</td>
<td class="comment-1" rowspan="1">A = IY[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44587"></span>AE2B</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">C = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44588"></span>AE2C</td>
<td class="instruction">SUB (IY+$00)</td>
<td class="comment-1" rowspan="1">A -= IY[0]  -- A is now the delta between adjacent elements</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44591"></span>
<div class="comments">
<div class="paragraph">
Multiplier. DE = multiplier. A = multiplicand. HL = result.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44591"></span>AE2F</td>
<td class="instruction">LD D,$00</td>
<td class="comment-1" rowspan="4">DE = A; HL = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44593"></span>AE31</td>
<td class="instruction">LD H,D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44594"></span>AE32</td>
<td class="instruction">LD L,D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44595"></span>AE33</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44596"></span>AE34</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1">A = IX[4]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44599"></span>AE37</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">B = 8  -- iterations of multiply loop</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_7</td>
<td class="address-2"><span id="44601"></span>AE39</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1">Test top bit</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44602"></span>AE3A</td>
<td class="instruction">JR NC,<a href="ADA0.html#44605">draw_hazards_8</a></td>
<td class="comment-1" rowspan="2">If it carried out then add</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44604"></span>AE3C</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_8</td>
<td class="address-2"><span id="44605"></span>AE3D</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1">Double</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44606"></span>AE3E</td>
<td class="instruction">DJNZ <a href="ADA0.html#44601">draw_hazards_7</a></td>
<td class="comment-1" rowspan="1">Loop</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44608"></span>AE40</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H  -- high part of result</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44609"></span>AE41</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44610"></span>AE42</td>
<td class="instruction">LD (IX+$06),A</td>
<td class="comment-1" rowspan="1">IX[6] = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44613"></span>AE45</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="4">A = ~((C - A) &lt;&lt; 1)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44615"></span>AE47</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44616"></span>AE48</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44617"></span>AE49</td>
<td class="instruction">CPL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44618"></span>AE4A</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="2">HL = $E800 + A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44619"></span>AE4B</td>
<td class="instruction">LD H,$E8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44621"></span>AE4D</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1">D = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44622"></span>AE4E</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">HL--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44623"></span>AE4F</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1">E = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44624"></span>AE50</td>
<td class="instruction">LD H,$EC</td>
<td class="comment-1" rowspan="1">H = $EC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44626"></span>AE52</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44627"></span>AE53</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">L++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44628"></span>AE54</td>
<td class="instruction">LD H,(HL)</td>
<td class="comment-1" rowspan="1">H = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44629"></span>AE55</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44630"></span>AE56</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44631"></span>AE57</td>
<td class="instruction">LD ($AE71),DE</td>
<td class="comment-1" rowspan="1">Self modify 'LD HL,xxxx' @ <a href="ADA0.html#44656">AE70</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44635"></span>AE5B</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1">HL -= DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44637"></span>AE5D</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Swap</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44638"></span>AE5E</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="1">HL = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44641"></span>AE61</td>
<td class="instruction">LD A,(IX+$05)</td>
<td class="comment-1" rowspan="1">A = IX[5]</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44644"></span>
<div class="comments">
<div class="paragraph">
Another multiplier.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44644"></span>AE64</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1">B = 8</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_9</td>
<td class="address-2"><span id="44646"></span>AE66</td>
<td class="instruction">RLA</td>
<td class="comment-1" rowspan="1">A &lt;&lt;= 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44647"></span>AE67</td>
<td class="instruction">JR NC,<a href="ADA0.html#44650">draw_hazards_10</a></td>
<td class="comment-1" rowspan="2">If it carried out then add</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44649"></span>AE69</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_10</td>
<td class="address-2"><span id="44650"></span>AE6A</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1">Double</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44651"></span>AE6B</td>
<td class="instruction">DJNZ <a href="ADA0.html#44646">draw_hazards_9</a></td>
<td class="comment-1" rowspan="1">Loop</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44653"></span>AE6D</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">A = H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44654"></span>AE6E</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44655"></span>AE6F</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">C = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44656"></span>AE70</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="2">HL = &lt;self modified&gt; + BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44659"></span>AE73</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44660"></span>AE74</td>
<td class="instruction">LD (IX+$02),L</td>
<td class="comment-1" rowspan="2">wordat(IX + 2) = HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44663"></span>AE77</td>
<td class="instruction">LD (IX+$03),H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44666"></span>AE7A</td>
<td class="instruction">CALL <a href="AD51.html">sub_ad51</a></td>
<td class="comment-1" rowspan="1">Call sub_ad51</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44669"></span>AE7D</td>
<td class="instruction">LD D,(IX+$01)</td>
<td class="comment-1" rowspan="1">D = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44672"></span>AE80</td>
<td class="instruction">LD E,(IX+$04)</td>
<td class="comment-1" rowspan="1">E = IX[4]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44675"></span>AE83</td>
<td class="instruction">LD HL,$A222</td>
<td class="comment-1" rowspan="1">HL = &amp;var_a222</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44678"></span>AE86</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44679"></span>AE87</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">(*HL)++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44680"></span>AE88</td>
<td class="instruction">LD HL,$E900</td>
<td class="comment-1" rowspan="1">HL -&gt; table</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44683"></span>AE8B</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44684"></span>AE8C</td>
<td class="instruction">JR Z,<a href="ADA0.html#44703">draw_hazards_13</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44686"></span>AE8E</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">Iterations</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44687"></span>
<div class="comments">
<div class="paragraph">
Loop starts
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_11</td>
<td class="address-2"><span id="44687"></span>AE8F</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1">A = D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44688"></span>AE90</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">Compare to *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44689"></span>AE91</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">L++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44690"></span>AE92</td>
<td class="instruction">JR C,<a href="ADA0.html#44698">draw_hazards_12</a></td>
<td class="comment-1" rowspan="1">Jump if A &lt; *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44692"></span>AE94</td>
<td class="instruction">JR NZ,<a href="ADA0.html#44715">draw_hazards_14</a></td>
<td class="comment-1" rowspan="1">Jump if A != *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44694"></span>AE96</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1">A = E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44695"></span>AE97</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">Compare to *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44696"></span>AE98</td>
<td class="instruction">JR C,<a href="ADA0.html#44715">draw_hazards_14</a></td>
<td class="comment-1" rowspan="1">Jump if A &lt; *HL</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_12</td>
<td class="address-2"><span id="44698"></span>AE9A</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="3">L += 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44699"></span>AE9B</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44700"></span>AE9C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44701"></span>AE9D</td>
<td class="instruction">DJNZ <a href="ADA0.html#44687">draw_hazards_11</a></td>
<td class="comment-1" rowspan="1">Loop</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_13</td>
<td class="address-2"><span id="44703"></span>AE9F</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-1" rowspan="4">wordat(HL) = DE; HL += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44704"></span>AEA0</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44705"></span>AEA1</td>
<td class="instruction">LD (HL),E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44706"></span>AEA2</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44707"></span>AEA3</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="2">DE = IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44709"></span>AEA5</td>
<td class="instruction">POP DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44710"></span>AEA6</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-1" rowspan="3">wordat(HL) = DE; HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44711"></span>AEA7</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44712"></span>AEA8</td>
<td class="instruction">LD (HL),D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44713"></span>AEA9</td>
<td class="instruction">JR <a href="ADA0.html#44744">draw_hazards_15</a></td>
<td class="comment-1" rowspan="1">Jump</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_14</td>
<td class="address-2"><span id="44715"></span>AEAB</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Preserve DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44716"></span>AEAC</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="3">A = B * 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44717"></span>AEAD</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44718"></span>AEAE</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44719"></span>AEAF</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="2">BC = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44720"></span>AEB0</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44722"></span>AEB2</td>
<td class="instruction">ADD A,$02</td>
<td class="comment-1" rowspan="2">A += 2 + L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44724"></span>AEB4</td>
<td class="instruction">ADD A,L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44725"></span>AEB5</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44726"></span>AEB6</td>
<td class="instruction">SUB $04</td>
<td class="comment-1" rowspan="1">A -= 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44728"></span>AEB8</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44729"></span>AEB9</td>
<td class="instruction">LD D,H</td>
<td class="comment-1" rowspan="1">D = H</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44730"></span>AEBA</td>
<td class="instruction">LDDR</td>
<td class="comment-1" rowspan="1">Do *HL-- = *DE-- until BC == 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44732"></span>AEBC</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44733"></span>AEBD</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="2">DE = IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44735"></span>AEBF</td>
<td class="instruction">POP DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44736"></span>AEC0</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-1" rowspan="4">wordat(HL) = DE; HL -= 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44737"></span>AEC1</td>
<td class="instruction">DEC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44738"></span>AEC2</td>
<td class="instruction">LD (HL),E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44739"></span>AEC3</td>
<td class="instruction">DEC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44740"></span>AEC4</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1">Restore DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44741"></span>AEC5</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-1" rowspan="1">*HL = E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44742"></span>AEC6</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">L--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44743"></span>AEC7</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-1" rowspan="1">*HL = D</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_15</td>
<td class="address-2"><span id="44744"></span>AEC8</td>
<td class="instruction">LD L,(IX+$0B)</td>
<td class="comment-1" rowspan="2">HL = wordat(IX + 11)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44747"></span>AECB</td>
<td class="instruction">LD H,(IX+$0C)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44750"></span>AECE</td>
<td class="instruction">JP (HL)</td>
<td class="comment-1" rowspan="1">Jump there</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44751"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="8F5F.html">main_loop_23</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_16</td>
<td class="address-2"><span id="44751"></span>AECF</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="1">HL = &lt;self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44754"></span>AED2</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1">A = B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44755"></span>AED3</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="2">Return if A != *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44756"></span>AED4</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44757"></span>AED5</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44758"></span>AED6</td>
<td class="instruction">CP $0B</td>
<td class="comment-1" rowspan="2">Jump if A &lt; 11</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44760"></span>AED8</td>
<td class="instruction">JR C,<a href="ADA0.html#44764">draw_hazards_17</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44762"></span>AEDA</td>
<td class="instruction">LD A,$0A</td>
<td class="comment-1" rowspan="1">A = 10</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_17</td>
<td class="address-2"><span id="44764"></span>AEDC</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1">A &gt;&gt;= 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44766"></span>AEDE</td>
<td class="instruction">LD ($AFFC),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' @ <a href="ADA0.html#45051">AFFB</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44769"></span>AEE1</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44770"></span>AEE2</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="3">A &lt;&lt;= 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44771"></span>AEE3</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44772"></span>AEE4</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44773"></span>AEE5</td>
<td class="instruction">SUB E</td>
<td class="comment-1" rowspan="1">A -= E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44774"></span>AEE6</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="2">DE = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44775"></span>AEE7</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_18</td>
<td class="address-2"><span id="44777"></span>AEE9</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="2">L += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44778"></span>AEEA</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44779"></span>AEEB</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="6">IX = wordat(HL); HL += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44780"></span>AEEC</td>
<td class="instruction">LD IXl,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44782"></span>AEEE</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44783"></span>AEEF</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44784"></span>AEF0</td>
<td class="instruction">LD IXh,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44786"></span>AEF2</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44787"></span>AEF3</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="3">Preserve HL, BC, DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44788"></span>AEF4</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44789"></span>AEF5</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44790"></span>AEF6</td>
<td class="instruction">LD H,(IX+$0A)</td>
<td class="comment-1" rowspan="2">HL = wordat(IX + 9)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44793"></span>AEF9</td>
<td class="instruction">LD L,(IX+$09)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44796"></span>AEFC</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">HL += DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44797"></span>AEFD</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1">E = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44798"></span>AEFE</td>
<td class="instruction">RLC E</td>
<td class="comment-1" rowspan="3">E &lt;&lt;= 3 ?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44800"></span>AF00</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44802"></span>AF02</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44804"></span>AF04</td>
<td class="instruction">LD A,(IX+$06)</td>
<td class="comment-1" rowspan="2">A = IX[6] - IX[16]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44807"></span>AF07</td>
<td class="instruction">SUB (IX+$10)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44810"></span>AF0A</td>
<td class="instruction">LD ($933E),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD D,x' @ <a href="92E1.html#37693">draw_object_right_8</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44813"></span>AF0D</td>
<td class="instruction">LD A,(IX+$13)</td>
<td class="comment-1" rowspan="1">A = IX[19]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44816"></span>AF10</td>
<td class="instruction">LD ($93C1),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' @ <a href="92E1.html#37824">93C0</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44819"></span>AF13</td>
<td class="instruction">LD A,(IX+$0F)</td>
<td class="comment-1" rowspan="2">A = IX[15] + 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44822"></span>AF16</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44823"></span>AF17</td>
<td class="instruction">JR Z,<a href="ADA0.html#44880">draw_hazards_23</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44825"></span>AF19</td>
<td class="instruction">LD A,(IX+$03)</td>
<td class="comment-1" rowspan="1">A = IX[3]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44828"></span>AF1C</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44829"></span>AF1D</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="1">A = IX[2]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44832"></span>AF20</td>
<td class="instruction">JP M,<a href="ADA0.html#44847">draw_hazards_19</a></td>
<td class="comment-1" rowspan="1">Jump if negative</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44835"></span>AF23</td>
<td class="instruction">JP NZ,<a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1">Jump if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44838"></span>AF26</td>
<td class="instruction">CP $80</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 128</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44840"></span>AF28</td>
<td class="instruction">JP NC,<a href="ADA0.html#44856">draw_hazards_21</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44843"></span>AF2B</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44844"></span>AF2C</td>
<td class="instruction">JP <a href="ADA0.html#44850">draw_hazards_20</a></td>
<td class="comment-1" rowspan="1">Jump</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_19</td>
<td class="address-2"><span id="44847"></span>AF2F</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44848"></span>AF30</td>
<td class="instruction">JR NC,<a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1">Jump if no carry</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_20</td>
<td class="address-2"><span id="44850"></span>AF32</td>
<td class="instruction">CALL <a href="9278.html#37530">draw_object_left_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44853"></span>AF35</td>
<td class="instruction">JP <a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_21</td>
<td class="address-2"><span id="44856"></span>AF38</td>
<td class="instruction">CALL <a href="92E1.html#37641">draw_object_right_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_22</td>
<td class="address-2"><span id="44859"></span>AF3B</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44860"></span>AF3C</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44861"></span>AF3D</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Self modify 'LD A,x' @ <a href="92E1.html#37824">93C0</a> to load 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44862"></span>AF3E</td>
<td class="instruction">LD ($93C1),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44865"></span>AF41</td>
<td class="instruction">LD HL,$A222</td>
<td class="comment-1" rowspan="1">HL = &amp;var_a222</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44868"></span>AF44</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">(*HL)--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44869"></span>AF45</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44870"></span>AF46</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44871"></span>AF47</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44872"></span>AF48</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="2">Jump if A == B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44873"></span>AF49</td>
<td class="instruction">JP Z,<a href="ADA0.html#44777">draw_hazards_18</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44876"></span>AF4C</td>
<td class="instruction">LD ($AED0),HL</td>
<td class="comment-1" rowspan="1">Self modify 'LD HL' @ <a href="ADA0.html#44751">draw_hazards_16</a> to load HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44879"></span>AF4F</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_23</td>
<td class="address-2"><span id="44880"></span>AF50</td>
<td class="instruction">LD A,(IX+$03)</td>
<td class="comment-1" rowspan="1">A = IX[3]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44883"></span>AF53</td>
<td class="instruction">LD ($B02A),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' @ <a href="ADA0.html#45097">B029</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44886"></span>AF56</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44887"></span>AF57</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="1">A = IX[2]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44890"></span>AF5A</td>
<td class="instruction">LD ($B02D),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' @ <a href="ADA0.html#45100">B02C</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44893"></span>AF5D</td>
<td class="instruction">JP M,<a href="ADA0.html#44908">draw_hazards_24</a></td>
<td class="comment-1" rowspan="1">Jump if negative</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44896"></span>AF60</td>
<td class="instruction">JP NZ,<a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1">Jump if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44899"></span>AF63</td>
<td class="instruction">CP $80</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 128</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44901"></span>AF65</td>
<td class="instruction">JP NC,<a href="ADA0.html#44917">draw_hazards_26</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44904"></span>AF68</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A = E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44905"></span>AF69</td>
<td class="instruction">JP <a href="ADA0.html#44911">draw_hazards_25</a></td>
<td class="comment-1" rowspan="1">Jump</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_24</td>
<td class="address-2"><span id="44908"></span>AF6C</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A = E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44909"></span>AF6D</td>
<td class="instruction">JR NC,<a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1">-- checking result of test at <a href="ADA0.html#44886">AF56</a>?</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_25</td>
<td class="address-2"><span id="44911"></span>AF6F</td>
<td class="instruction">CALL <a href="9278.html#37530">draw_object_left_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44914"></span>AF72</td>
<td class="instruction">JP <a href="ADA0.html#44920">draw_hazards_27</a></td>
<td class="comment-1" rowspan="1">Jump</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_26</td>
<td class="address-2"><span id="44917"></span>AF75</td>
<td class="instruction">CALL <a href="92E1.html#37641">draw_object_right_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_27</td>
<td class="address-2"><span id="44920"></span>AF78</td>
<td class="instruction">LD A,($933E)</td>
<td class="comment-1" rowspan="1">Read A from 'LD D,x' @ <a href="92E1.html#37693">draw_object_right_8</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44923"></span>AF7B</td>
<td class="instruction">LD ($B024),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD A,x' @ <a href="ADA0.html#45091">B023</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44926"></span>AF7E</td>
<td class="instruction">LD A,($A232)</td>
<td class="comment-1" rowspan="1">Get smash_factor</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44929"></span>AF81</td>
<td class="instruction">CP $05</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 5</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44931"></span>AF83</td>
<td class="instruction">JR NC,<a href="ADA0.html#44958">draw_hazards_28</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44933"></span>AF85</td>
<td class="instruction">LD A,($AFFC)</td>
<td class="comment-1" rowspan="1">A = x in 'LD A,x' @ <a href="ADA0.html#45051">AFFB</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44936"></span>AF88</td>
<td class="instruction">CP $04</td>
<td class="comment-1" rowspan="2">Jump if A &gt;= 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44938"></span>AF8A</td>
<td class="instruction">JP NC,<a href="ADA0.html#44958">draw_hazards_28</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44941"></span>AF8D</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1">Double A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44942"></span>AF8E</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="2">BC = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44943"></span>AF8F</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44945"></span>AF91</td>
<td class="instruction">LD HL,$CDEC</td>
<td class="comment-1" rowspan="2">HL = <a href="CDEC.html">table_cdec</a> + BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44948"></span>AF94</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44949"></span>
<div class="comments">
<div class="paragraph">
I see this getting hit only when in smash mode.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44949"></span>AF95</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="3">BC = wordat(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44950"></span>AF96</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44951"></span>AF97</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44952"></span>AF98</td>
<td class="instruction">LD HL,$E1D8</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44955"></span>AF9B</td>
<td class="instruction">CALL <a href="ADA0.html#45084">draw_hazards_35</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_28</td>
<td class="address-2"><span id="44958"></span>AF9E</td>
<td class="instruction">LD A,($A232)</td>
<td class="comment-1" rowspan="1">Get smash_factor</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44961"></span>AFA1</td>
<td class="instruction">CP $04</td>
<td class="comment-1" rowspan="2">Jump if it's &lt; 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44963"></span>AFA3</td>
<td class="instruction">JR C,<a href="ADA0.html#45007">draw_hazards_29</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44965"></span>AFA5</td>
<td class="instruction">SUB $04</td>
<td class="comment-1" rowspan="3">A = (A - 4) * 4 ?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44967"></span>AFA7</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44968"></span>AFA8</td>
<td class="instruction">RLCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44969"></span>AFA9</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1">Bank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44970"></span>AFAA</td>
<td class="instruction">LD A,($AFFC)</td>
<td class="comment-1" rowspan="1">A = x in 'LD A,x' @ <a href="ADA0.html#45051">AFFB</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44973"></span>AFAD</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">*= 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44974"></span>AFAE</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="2">DE = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44975"></span>AFAF</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44977"></span>AFB1</td>
<td class="instruction">LD HL,$CE00</td>
<td class="comment-1" rowspan="2">HL = <a href="CDEC.html#52736">table_ce00</a> + DE  -- table?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44980"></span>AFB4</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44981"></span>AFB5</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="3">BC = wordat(HL); HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44982"></span>AFB6</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44983"></span>AFB7</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44984"></span>AFB8</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1">Unbank</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44985"></span>AFB9</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44986"></span>AFBA</td>
<td class="instruction">LD HL,$CDF4</td>
<td class="comment-1" rowspan="1">another table?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44989"></span>AFBD</td>
<td class="instruction">LD A,($A236)</td>
<td class="comment-1" rowspan="2">Load counter_C AND 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44992"></span>AFC0</td>
<td class="instruction">AND $01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44994"></span>AFC2</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">A &lt;&lt;= 1?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44995"></span>AFC3</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44996"></span>AFC4</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44997"></span>AFC5</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">HL += DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44998"></span>AFC6</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="4">HL = wordat(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44999"></span>AFC7</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45000"></span>AFC8</td>
<td class="instruction">LD H,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45001"></span>AFC9</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45002"></span>AFCA</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="2">Retrieve DE from stack</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45003"></span>AFCB</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45004"></span>AFCC</td>
<td class="instruction">CALL <a href="ADA0.html#45083">draw_hazards_34</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_29</td>
<td class="address-2"><span id="45007"></span>AFCF</td>
<td class="instruction">LD A,($A232)</td>
<td class="comment-1" rowspan="1">Get smash_factor</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45010"></span>AFD2</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="2">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45011"></span>AFD3</td>
<td class="instruction">JP Z,<a href="ADA0.html#44859">draw_hazards_22</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45014"></span>AFD6</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45015"></span>AFD7</td>
<td class="instruction">JR Z,<a href="ADA0.html#45032">draw_hazards_31</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45017"></span>AFD9</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">A--</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45018"></span>AFDA</td>
<td class="instruction">JR Z,<a href="ADA0.html#45026">draw_hazards_30</a></td>
<td class="comment-1" rowspan="1">Jump if zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45020"></span>AFDC</td>
<td class="instruction">LD HL,$CE26</td>
<td class="comment-1" rowspan="1">table?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45023"></span>AFDF</td>
<td class="instruction">CALL <a href="ADA0.html#45041">draw_hazards_32</a></td>
<td class="comment-1" rowspan="1">Call aff1</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_30</td>
<td class="address-2"><span id="45026"></span>AFE2</td>
<td class="instruction">LD HL,$CE0C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45029"></span>AFE5</td>
<td class="instruction">CALL <a href="ADA0.html#45041">draw_hazards_32</a></td>
<td class="comment-1" rowspan="1">Call aff1</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_31</td>
<td class="address-2"><span id="45032"></span>AFE8</td>
<td class="instruction">LD HL,$CE19</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45035"></span>AFEB</td>
<td class="instruction">CALL <a href="ADA0.html#45041">draw_hazards_32</a></td>
<td class="comment-1" rowspan="1">Call aff1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45038"></span>AFEE</td>
<td class="instruction">JP <a href="ADA0.html#44859">draw_hazards_22</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_32</td>
<td class="address-2"><span id="45041"></span>AFF1</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="2">A = *HL - 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45042"></span>AFF2</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45043"></span>AFF3</td>
<td class="instruction">JP P,<a href="ADA0.html#45048">draw_hazards_33</a></td>
<td class="comment-1" rowspan="1">Jump if +ve</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45046"></span>AFF6</td>
<td class="instruction">LD A,$05</td>
<td class="comment-1" rowspan="1">A = 5  -- it became zero, reset to 5</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_33</td>
<td class="address-2"><span id="45048"></span>AFF8</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">*HL = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45049"></span>AFF9</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45050"></span>AFFA</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45051"></span>AFFB</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = &lt;self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45053"></span>AFFD</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">C = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45054"></span>AFFE</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1">D = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45055"></span>AFFF</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45056"></span>B000</td>
<td class="instruction">CP $06</td>
<td class="comment-1" rowspan="2">Return if A &gt;= 6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45058"></span>B002</td>
<td class="instruction">RET NC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45059"></span>B003</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45060"></span>B004</td>
<td class="instruction">SUB D</td>
<td class="comment-1" rowspan="1">A -= D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45061"></span>B005</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1">D = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45062"></span>B006</td>
<td class="instruction">SLA C</td>
<td class="comment-1" rowspan="1">C &lt;&lt;= 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45064"></span>B008</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1">B = 0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45066"></span>B00A</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1">HL += BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45067"></span>B00B</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45068"></span>B00C</td>
<td class="instruction">SUB D</td>
<td class="comment-1" rowspan="1">A -= D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45069"></span>B00D</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">B = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45070"></span>B00E</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45071"></span>B00F</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1">C = *HL</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="45072"></span>
<div class="comments">
<div class="paragraph">
<span class="register">E</span> = smoke animation index Select the frame.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45072"></span>B010</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="7">DE = E * 7</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45073"></span>B011</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45074"></span>B012</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45075"></span>B013</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45076"></span>B014</td>
<td class="instruction">SUB E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45077"></span>B015</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45078"></span>B016</td>
<td class="instruction">LD D,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45080"></span>B018</td>
<td class="instruction">LD HL,$E1AE</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at smoke_defns</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="45083"></span>
<div class="comments">
<div class="paragraph">
Similar code to $AA19.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_34</td>
<td class="address-2"><span id="45083"></span>B01B</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1">HL += DE</td>
</tr>
<tr>
<td class="asm-label">draw_hazards_35</td>
<td class="address-2"><span id="45084"></span>B01C</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="4">E = *HL * 8  -- turn byte width to pixel width</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45085"></span>B01D</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45087"></span>B01F</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45089"></span>B021</td>
<td class="instruction">RLC E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45091"></span>B023</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">A = &lt;self modified&gt; + B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45093"></span>B025</td>
<td class="instruction">ADD A,B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45094"></span>B026</td>
<td class="instruction">LD ($933E),A</td>
<td class="comment-1" rowspan="1">Self modify 'LD D,x' @ <a href="92E1.html#37693">draw_object_right_8</a> to load A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45097"></span>B029</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = &lt;self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45099"></span>B02B</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45100"></span>B02C</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1">A = &lt;self modified&gt;</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45102"></span>B02E</td>
<td class="instruction">JP M,<a href="ADA0.html#45117">draw_hazards_37</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="ADA0.html#45117">draw_hazards_37</a> if negative</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45105"></span>B031</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if non-zero</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45106"></span>B032</td>
<td class="instruction">ADD A,C</td>
<td class="comment-1" rowspan="1">A += C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45107"></span>B033</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45108"></span>B034</td>
<td class="instruction">CP $80</td>
<td class="comment-1" rowspan="2">Jump to <a href="92E1.html#37641">draw_object_right_3</a> if A &gt;= 128</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45110"></span>B036</td>
<td class="instruction">JP NC,<a href="92E1.html#37641">draw_object_right_3</a></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_36</td>
<td class="address-2"><span id="45113"></span>B039</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E  -- pixel width</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45114"></span>B03A</td>
<td class="instruction">JP <a href="9278.html#37530">draw_object_left_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="9278.html#37530">draw_object_left_1</a></td>
</tr>
<tr>
<td class="asm-label">draw_hazards_37</td>
<td class="address-2"><span id="45117"></span>B03D</td>
<td class="instruction">ADD A,C</td>
<td class="comment-1" rowspan="1">A += C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45118"></span>B03E</td>
<td class="instruction">JR C,<a href="ADA0.html#45113">draw_hazards_36</a></td>
<td class="comment-1" rowspan="1">Loop? if carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45120"></span>B040</td>
<td class="instruction">ADD A,E</td>
<td class="comment-1" rowspan="1">A += E  -- pixel width</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45121"></span>B041</td>
<td class="instruction">JP C,<a href="9278.html#37530">draw_object_left_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="9278.html#37530">draw_object_left_1</a> if carry</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="45124"></span>B044</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AD51.html">AD51</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44448">Map</a></td>
<td class="next">
Next: <a href="B045.html">B045</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.)  2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>