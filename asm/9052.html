<!DOCTYPE html>
<html>
<head>
<title>Chase H.Q.: Routine at 9052</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Chase H.Q.</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9023.html">9023</a>
</td>
<td class="up">Up: <a href="../maps/all.html#36946">Map</a></td>
<td class="next">
Next: <a href="916C.html">916C</a>
</td>
</tr>
</table>
<div class="description">9052: Draws overhead graphics.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
This gets used on stage 3 when drawing the overhead structure graphics.
</div>
<div class="paragraph">
sampled IX=$EAB2 DE=$6F26 HL=$9052 BC=$1420 (when in stage3!)
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">draw_overhead</td>
<td class="address-2"><span id="36946"></span>9052</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="3">Preserve</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36948"></span>9054</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36949"></span>9055</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36950"></span>9056</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1">A = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36953"></span>9059</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36954"></span>905A</td>
<td class="instruction">CALL Z,<a href="916C.html">draw_stretchy_object_left</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36957"></span>905D</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="3">Restore (restore DE to HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36958"></span>905E</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36959"></span>905F</td>
<td class="instruction">POP IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36961"></span>9061</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36962"></span>9062</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="3">DE = wordat(HL); HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36963"></span>9063</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36964"></span>9064</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36965"></span>9065</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="2">DE += 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36966"></span>9066</td>
<td class="instruction">INC DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36967"></span>9067</td>
<td class="instruction">LD A,($A23F)</td>
<td class="comment-1" rowspan="2">A = fast_counter &amp; $E0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36970"></span>906A</td>
<td class="instruction">AND $E0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36972"></span>906C</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36973"></span>906D</td>
<td class="instruction">RRC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36975"></span>906F</td>
<td class="instruction">RRC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36977"></span>9071</td>
<td class="instruction">SUB L</td>
<td class="comment-1" rowspan="1">A -= L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36978"></span>9072</td>
<td class="instruction">RRC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36980"></span>9074</td>
<td class="instruction">RRC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36982"></span>9076</td>
<td class="instruction">SUB L</td>
<td class="comment-1" rowspan="1">A -= L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36983"></span>9077</td>
<td class="instruction">ADD A,B</td>
<td class="comment-1" rowspan="1">A += B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36984"></span>9078</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36985"></span>9079</td>
<td class="instruction">LD H,$E6</td>
<td class="comment-1" rowspan="1">H = $E6</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36987"></span>907B</td>
<td class="instruction">LD A,(IY+$00)</td>
<td class="comment-1" rowspan="2">A = IY[0] - IY[$35]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36990"></span>907E</td>
<td class="instruction">SUB (IY+$35)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36993"></span>9081</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">C = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36994"></span>9082</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1">A = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36995"></span>9083</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36996"></span>9084</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36998"></span>9086</td>
<td class="instruction">ADD A,L</td>
<td class="comment-1" rowspan="1">A += L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="36999"></span>9087</td>
<td class="instruction">SUB C</td>
<td class="comment-1" rowspan="1">A -= C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37000"></span>9088</td>
<td class="instruction">LD ($90F2),A</td>
<td class="comment-1" rowspan="1">Self modify 'SUB x' at $90F1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37003"></span>908B</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="2">A = B - 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37004"></span>908C</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37005"></span>908D</td>
<td class="instruction">CP $09</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37007"></span>908F</td>
<td class="instruction">JR C,<a href="9052.html#37011">do_9093</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37009"></span>9091</td>
<td class="instruction">LD A,$09</td>
<td class="comment-1" rowspan="1">A = $09</td>
</tr>
<tr>
<td class="asm-label">do_9093</td>
<td class="address-2"><span id="37011"></span>9093</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">B = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37012"></span>9094</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="4">HL = A * 2 + DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37013"></span>9095</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37014"></span>9096</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37016"></span>9098</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37017"></span>9099</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1">C = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37018"></span>909A</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1">A = B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37019"></span>909B</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="6">HL = ((A * 2) + B + 20) + DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37020"></span>909C</td>
<td class="instruction">ADD A,B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37021"></span>909D</td>
<td class="instruction">ADD A,$14</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37023"></span>909F</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37024"></span>90A0</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37026"></span>90A2</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37027"></span>90A3</td>
<td class="instruction">LD D,$01</td>
<td class="comment-1" rowspan="1">D = 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37029"></span>90A5</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1">A = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37032"></span>90A8</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37033"></span>90A9</td>
<td class="instruction">JP M,<a href="9052.html#37060">do_90c4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37036"></span>90AC</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37037"></span>90AD</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="3">A = IX[0] + $18 - C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37040"></span>90B0</td>
<td class="instruction">ADD A,$18</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37042"></span>90B2</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37043"></span>90B3</td>
<td class="instruction">JR C,<a href="9052.html#37060">do_90c4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37045"></span>90B5</td>
<td class="instruction">SUB $08</td>
<td class="comment-1" rowspan="1">A -= 8</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37047"></span>90B7</td>
<td class="instruction">JR C,<a href="9052.html#37060">do_90c4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37049"></span>90B9</td>
<td class="instruction">CP $08</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37051"></span>90BB</td>
<td class="instruction">JR C,<a href="9052.html#37060">do_90c4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37053"></span>90BD</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="3">A &gt;&gt;= 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37055"></span>90BF</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37057"></span>90C1</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37059"></span>90C3</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1">D = A</td>
</tr>
<tr>
<td class="asm-label">do_90c4</td>
<td class="address-2"><span id="37060"></span>90C4</td>
<td class="instruction">DEC IX</td>
<td class="comment-1" rowspan="2">IX -= 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37062"></span>90C6</td>
<td class="instruction">DEC IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37064"></span>90C8</td>
<td class="instruction">LD E,$1F</td>
<td class="comment-1" rowspan="1">E = $1F</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37066"></span>90CA</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1">A = IX[1]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37069"></span>90CD</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37070"></span>90CE</td>
<td class="instruction">RET M</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37071"></span>90CF</td>
<td class="instruction">JR NZ,<a href="9052.html#37092">do_90e4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37073"></span>90D1</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="2">A = IX[0] + C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37076"></span>90D4</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37077"></span>90D5</td>
<td class="instruction">JR C,<a href="9052.html#37092">do_90e4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37079"></span>90D7</td>
<td class="instruction">JR Z,<a href="9052.html#37092">do_90e4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37081"></span>90D9</td>
<td class="instruction">CP $F7</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37083"></span>90DB</td>
<td class="instruction">JR NC,<a href="9052.html#37092">do_90e4</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37085"></span>90DD</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="3">A &gt;&gt;= 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37087"></span>90DF</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37089"></span>90E1</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37091"></span>90E3</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1">E = A</td>
</tr>
<tr>
<td class="asm-label">do_90e4</td>
<td class="address-2"><span id="37092"></span>90E4</td>
<td class="instruction">LD C,D</td>
<td class="comment-1" rowspan="1">C = D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37093"></span>90E5</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="3">A = E * 2 - C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37094"></span>90E6</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37095"></span>90E7</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37096"></span>90E8</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="2">A = ~A + $3D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37097"></span>90E9</td>
<td class="instruction">ADD A,$3D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37099"></span>90EB</td>
<td class="instruction">LD ($9116),A</td>
<td class="comment-1" rowspan="1">*$9116 = A   -- Self modify jump table target</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37102"></span>90EE</td>
<td class="instruction">LD A,(IY+$35)</td>
<td class="comment-1" rowspan="1">A = IY[$35]</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37105"></span>90F1</td>
<td class="instruction">SUB $00</td>
<td class="comment-1" rowspan="1">A -= &lt;self modified&gt;  -- self modified by $9088</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37107"></span>90F3</td>
<td class="instruction">RET M</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37108"></span>90F4</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37109"></span>90F5</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">A++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37110"></span>90F6</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1">B = *HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37111"></span>90F7</td>
<td class="instruction">SUB B</td>
<td class="comment-1" rowspan="1">A -= B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37112"></span>90F8</td>
<td class="instruction">JR NC,<a href="9052.html#37116">do_90fc</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37114"></span>90FA</td>
<td class="instruction">ADD A,B</td>
<td class="comment-1" rowspan="1">A += B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37115"></span>90FB</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">B = A</td>
</tr>
<tr>
<td class="asm-label">do_90fc</td>
<td class="address-2"><span id="37116"></span>90FC</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37117"></span>90FD</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="3">DE = wordat(HL); HL++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37118"></span>90FE</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37119"></span>90FF</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37120"></span>9100</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37121"></span>9101</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1">L = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37122"></span>9102</td>
<td class="instruction">AND $0F</td>
<td class="comment-1" rowspan="3">H = (A &amp; $0F) + $F0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37124"></span>9104</td>
<td class="instruction">ADD A,$F0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37126"></span>9106</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37127"></span>9107</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="5">L = (L &amp; $70) * 2 + C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37128"></span>9108</td>
<td class="instruction">AND $70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37130"></span>910A</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37131"></span>910B</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37132"></span>910C</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37133"></span>910D</td>
<td class="instruction">JR <a href="9052.html#37139">do_9113</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">do_continue</td>
<td class="address-2"><span id="37135"></span>910F</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1">DE++</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37136"></span>9110</td>
<td class="instruction">DJNZ <a href="9052.html#37139">do_9113</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37138"></span>9112</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return</td>
</tr>
<tr>
<td class="asm-label">do_9113</td>
<td class="address-2"><span id="37139"></span>9113</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1">A = *DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37140"></span>9114</td>
<td class="instruction">LD C,L</td>
<td class="comment-1" rowspan="1">C = L</td>
</tr>
<tr>
<td class="asm-label">do_9115</td>
<td class="address-2"><span id="37141"></span>9115</td>
<td class="instruction">JR <a href="9052.html#37141">do_9115</a></td>
<td class="comment-1" rowspan="1">Self modified</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37143"></span>9117</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="58">*HL++ = A  -- 28 times</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37144"></span>9118</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37145"></span>9119</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37146"></span>911A</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37147"></span>911B</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37148"></span>911C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37149"></span>911D</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37150"></span>911E</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37151"></span>911F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37152"></span>9120</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37153"></span>9121</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37154"></span>9122</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37155"></span>9123</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37156"></span>9124</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37157"></span>9125</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37158"></span>9126</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37159"></span>9127</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37160"></span>9128</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37161"></span>9129</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37162"></span>912A</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37163"></span>912B</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37164"></span>912C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37165"></span>912D</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37166"></span>912E</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37167"></span>912F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37168"></span>9130</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37169"></span>9131</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37170"></span>9132</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37171"></span>9133</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37172"></span>9134</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37173"></span>9135</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37174"></span>9136</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37175"></span>9137</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37176"></span>9138</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37177"></span>9139</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37178"></span>913A</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37179"></span>913B</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37180"></span>913C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37181"></span>913D</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37182"></span>913E</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37183"></span>913F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37184"></span>9140</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37185"></span>9141</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37186"></span>9142</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37187"></span>9143</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37188"></span>9144</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37189"></span>9145</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37190"></span>9146</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37191"></span>9147</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37192"></span>9148</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37193"></span>9149</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37194"></span>914A</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37195"></span>914B</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37196"></span>914C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37197"></span>914D</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37198"></span>914E</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37199"></span>914F</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37200"></span>9150</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37201"></span>9151</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">*HL = A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37202"></span>9152</td>
<td class="instruction">LD L,C</td>
<td class="comment-1" rowspan="1">L = C  -- restore</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37203"></span>
<div class="comments">
<div class="paragraph">
Move to next scanline
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37203"></span>9153</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1">Save for checking in a moment</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37204"></span>9154</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Move to next scanline (visually upwards)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37205"></span>9155</td>
<td class="instruction">AND $0F</td>
<td class="comment-1" rowspan="1">Would it have rolled over into the top nibble?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37207"></span>9157</td>
<td class="instruction">JP NZ,<a href="9052.html#37135">do_continue</a></td>
<td class="comment-1" rowspan="1">No - continue</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="37210"></span>
<div class="comments">
<div class="paragraph">
It rolled over
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37210"></span>915A</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3">Put back the bit stolen by rollover</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37211"></span>915B</td>
<td class="instruction">ADD A,$10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37213"></span>915D</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37214"></span>915E</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="3">Move to next chunk of 16 scanlines</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37215"></span>915F</td>
<td class="instruction">SUB $20</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37217"></span>9161</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37218"></span>9162</td>
<td class="instruction">JP NC,<a href="9052.html#37135">do_continue</a></td>
<td class="comment-1" rowspan="1">Continue if it didn't roll over</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37221"></span>9165</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3">Otherwise move to the next chunk of 128 scanlines (would put us outside the back buffer)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37222"></span>9166</td>
<td class="instruction">SUB $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37224"></span>9168</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="37225"></span>9169</td>
<td class="instruction">JP <a href="9052.html#37135">do_continue</a></td>
<td class="comment-1" rowspan="1">Loop</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9023.html">9023</a>
</td>
<td class="up">Up: <a href="../maps/all.html#36946">Map</a></td>
<td class="next">
Next: <a href="916C.html">916C</a>
</td>
</tr>
</table>
<footer>
<div class="release">The incomplete Chase H.Q. disassembly 20231102</div>
<div class="copyright">&copy; 1988 Taito Corporation &copy; 1989 Ocean Software Ltd. (Chase H.Q.) © 2023 David Thomas (this disassembly)</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.9.</div>
</footer>
</body>
</html>